"use strict";(self.webpackChunklabour_app_react=self.webpackChunklabour_app_react||[]).push([[581],{4063:(e,s,a)=>{a.d(s,{A:()=>x});var l=a(9379),t=a(45),i=a(8139),n=a.n(i),r=a(5043),c=a(7852),d=a(579);const o=["bsPrefix","bg","pill","text","className","as"],m=r.forwardRef(((e,s)=>{let{bsPrefix:a,bg:i="primary",pill:r=!1,text:m,className:x,as:u="span"}=e,b=(0,t.A)(e,o);const h=(0,c.oU)(a,"badge");return(0,d.jsx)(u,(0,l.A)((0,l.A)({ref:s},b),{},{className:n()(x,h,r&&"rounded-pill",m&&"text-".concat(m),i&&"bg-".concat(i))}))}));m.displayName="Badge";const x=m},5581:(e,s,a)=>{a.r(s),a.d(s,{default:()=>E});var l=a(9379),t=a(5043),i=a(4063),n=a(7417),r=a(1719),c=a(3519),d=a(1072),o=a(8602),m=a(4282),x=a(8628),u=a(45),b=a(8139),h=a.n(b),g=a(7852),j=a(2663),p=a(579);const N=["min","now","max","label","visuallyHidden","striped","animated","className","style","variant","bsPrefix"],v=["isChild"],f=["min","now","max","label","visuallyHidden","striped","animated","bsPrefix","variant","className","children"];function y(e,s,a){const l=(e-s)/(a-s)*100;return Math.round(1e3*l)/1e3}function A(e,s){let{min:a,now:t,max:i,label:n,visuallyHidden:r,striped:c,animated:d,className:o,style:m,variant:x,bsPrefix:b}=e,g=(0,u.A)(e,N);return(0,p.jsx)("div",(0,l.A)((0,l.A)({ref:s},g),{},{role:"progressbar",className:h()(o,"".concat(b,"-bar"),{["bg-".concat(x)]:x,["".concat(b,"-bar-animated")]:d,["".concat(b,"-bar-striped")]:d||c}),style:(0,l.A)({width:"".concat(y(t,a,i),"%")},m),"aria-valuenow":t,"aria-valuemin":a,"aria-valuemax":i,children:r?(0,p.jsx)("span",{className:"visually-hidden",children:n}):n}))}const w=t.forwardRef(((e,s)=>{let{isChild:a=!1}=e,i=(0,u.A)(e,v);const n=(0,l.A)({min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1},i);if(n.bsPrefix=(0,g.oU)(n.bsPrefix,"progress"),a)return A(n,s);const{min:r,now:c,max:d,label:o,visuallyHidden:m,striped:x,animated:b,bsPrefix:N,variant:y,className:w,children:k}=n,S=(0,u.A)(n,f);return(0,p.jsx)("div",(0,l.A)((0,l.A)({ref:s},S),{},{className:h()(w,N),children:k?(0,j.Tj)(k,(e=>(0,t.cloneElement)(e,{isChild:!0}))):A({min:r,now:c,max:d,label:o,visuallyHidden:m,striped:x,animated:b,bsPrefix:N,variant:y},s)}))}));w.displayName="ProgressBar";const k=w,S=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],C=t.forwardRef(((e,s)=>{let{bsPrefix:a,className:t,striped:i,bordered:n,borderless:r,hover:c,size:d,variant:o,responsive:m}=e,x=(0,u.A)(e,S);const b=(0,g.oU)(a,"table"),j=h()(t,b,o&&"".concat(b,"-").concat(o),d&&"".concat(b,"-").concat(d),i&&"".concat(b,"-").concat("string"===typeof i?"striped-".concat(i):"striped"),n&&"".concat(b,"-bordered"),r&&"".concat(b,"-borderless"),c&&"".concat(b,"-hover")),N=(0,p.jsx)("table",(0,l.A)((0,l.A)({},x),{},{className:j,ref:s}));if(m){let e="".concat(b,"-responsive");return"string"===typeof m&&(e="".concat(e,"-").concat(m)),(0,p.jsx)("div",{className:e,children:N})}return N}));C.displayName="Table";const z=C;var I=a(3722),R=a(9869),D=a(615),L=a(3204),F=a(3216),P=a(9539),B=a(1587),T=a(5035);const O=["reviews"],H=e=>{let{show:s,onHide:a,labourDetails:i,onUpdateSuccess:c}=e;const[d,o]=(0,t.useState)({labourId:"",labourName:"",labourSkill:"",labourMobileNo:"",labourSubSkills:[]}),[x,b]=(0,t.useState)(!1),[h,g]=(0,t.useState)(null),[j,N]=(0,t.useState)(""),[v,f]=(0,t.useState)({services:[]}),y=e=>{if(!e||!v.services)return[];const s=v.services.find((s=>s.name===e));return s?s.subCategories:[]};(0,t.useEffect)((()=>{if(i&&s){console.log("Labour Details:",i),console.log("Labour Sub Skills:",i.labourSubSkills);let e=[];i.labourSubSkills&&Array.isArray(i.labourSubSkills)&&(e=i.labourSubSkills.map((e=>"string"===typeof e?e:e&&"object"===typeof e&&(e.subSkillName||e.name||e.value)||"")).filter((e=>""!==e.trim()))),console.log("Converted Sub Skills:",e),o({labourId:i.labourId||"",labourName:i.labourName||"",labourSkill:i.labourSkill||"",labourMobileNo:i.labourMobileNo||"",labourSubSkills:e}),g(null),N(i.labourSkill||"")}}),[i,s]),(0,t.useEffect)((()=>{fetch("/services.json").then((e=>e.json())).then((e=>{f(e)})).catch((e=>console.error("Error loading services data:",e)))}),[]);const A=e=>{const{name:s,value:a}=e.target;o((e=>{const t=(0,l.A)((0,l.A)({},e),{},{[s]:a});return"labourSkill"===s&&a!==e.labourSkill&&(t.labourSubSkills=[]),t}))},w=d.labourSkill!==j;return(0,p.jsxs)(B.A,{show:s,onHide:a,size:"lg",centered:!0,children:[(0,p.jsx)(B.A.Header,{closeButton:!0,children:(0,p.jsxs)(B.A.Title,{children:[(0,p.jsx)(L.uO9,{className:"me-2"}),"Update Labour Details"]})}),(0,p.jsxs)(I.A,{onSubmit:async e=>{if(e.preventDefault(),0!==d.labourSubSkills.length){b(!0),g(null);try{const e=d.labourSubSkills.filter((e=>""!==e.trim())).map((e=>({subSkillName:e}))),s={labourId:parseInt(d.labourId)};d.labourName.trim()!==i.labourName&&(s.labourName=d.labourName),d.labourSkill!==i.labourSkill&&(s.labourSkill=d.labourSkill);const t=(i.labourSubSkills||[]).map((e=>"string"===typeof e?e:e.subSkillName||e.name||"")).filter((e=>""!==e.trim())),n=e.map((e=>e.subSkillName));(t.length!==n.length||!t.every(((e,s)=>e===n[s])))&&(s.labourSubSkills=e),console.log("Update Data:",s);const r=await P.n.updateLabourDetails(s);if(r&&!r.hasError){const e=(0,l.A)((0,l.A)({},i),s),{reviews:t}=e,n=(0,u.A)(e,O);localStorage.setItem("labour",JSON.stringify(n)),c&&c(n),a(),alert("Labour details updated successfully!")}else g("Failed to update labour details. Please try again.")}catch(s){console.error("Update error:",s),g("An error occurred while updating labour details. Please try again.")}finally{b(!1)}}else g("Please select at least one sub-skill.")},children:[(0,p.jsxs)(B.A.Body,{children:[h&&(0,p.jsx)(r.A,{variant:"danger",onClose:()=>g(null),dismissible:!0,children:h}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)(I.A.Group,{className:"mb-3",children:[(0,p.jsx)(I.A.Label,{children:"Labour ID"}),(0,p.jsx)(I.A.Control,{type:"text",name:"labourId",value:d.labourId,disabled:!0,className:"bg-light"}),(0,p.jsx)(I.A.Text,{className:"text-muted",children:"Labour ID cannot be changed"})]})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)(I.A.Group,{className:"mb-3",children:[(0,p.jsx)(I.A.Label,{children:"Labour Name"}),(0,p.jsx)(I.A.Control,{type:"text",name:"labourName",value:d.labourName,onChange:A,required:!0}),(0,p.jsx)(I.A.Text,{className:"text-muted",children:"Enter your full name"})]})})]}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)(I.A.Group,{className:"mb-3",children:[(0,p.jsx)(I.A.Label,{children:"Mobile Number"}),(0,p.jsx)(I.A.Control,{type:"text",name:"labourMobileNo",value:d.labourMobileNo,disabled:!0,className:"bg-light"}),(0,p.jsx)(I.A.Text,{className:"text-muted",children:"Mobile number cannot be changed"})]})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)(I.A.Group,{className:"mb-3",children:[(0,p.jsx)(I.A.Label,{children:"Labour Skill *"}),(0,p.jsxs)(I.A.Select,{name:"labourSkill",value:d.labourSkill,onChange:A,required:!0,children:[(0,p.jsx)("option",{value:"",children:"Select a skill"}),v.services&&v.services.map(((e,s)=>(0,p.jsx)("option",{value:e.name,children:e.name},s)))]})]})})]}),(0,p.jsxs)(I.A.Group,{className:"mb-3",children:[(0,p.jsxs)(I.A.Label,{className:"fw-bold",children:["Sub Skills",w&&(0,p.jsx)("span",{className:"text-danger ms-2",children:"* Required (skill changed)"})]}),d.labourSkill?(0,p.jsx)("div",{className:"sub-skills-container",children:(0,p.jsx)(T.Ay,{isMulti:!0,name:"labourSubSkills",options:[{value:"all",label:"Select All"},...y(d.labourSkill).map((e=>({value:e,label:e})))],onChange:e=>{if(e&&e.some((e=>"all"===e.value))){const e=y(d.labourSkill);o((s=>(0,l.A)((0,l.A)({},s),{},{labourSubSkills:e})))}else o((s=>(0,l.A)((0,l.A)({},s),{},{labourSubSkills:e?e.map((e=>e.value)):[]})))},value:d.labourSubSkills.map((e=>({value:e,label:e}))),className:"basic-multi-select",classNamePrefix:"select",placeholder:"Select your sub skills",menuPortalTarget:document.body,styles:{menuPortal:e=>(0,l.A)((0,l.A)({},e),{},{zIndex:9999}),menu:e=>(0,l.A)((0,l.A)({},e),{},{zIndex:9999,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"8px 0",maxHeight:"300px"}),control:e=>(0,l.A)((0,l.A)({},e),{},{minHeight:"44px",border:"2px solid #d1d5db",borderRadius:"8px",boxShadow:"none","&:hover":{borderColor:"#9ca3af"},"&:focus-within":{borderColor:"#3b82f6",boxShadow:"0 0 0 3px rgba(59, 130, 246, 0.1)"}}),option:e=>(0,l.A)((0,l.A)({},e),{},{padding:"12px 16px",fontSize:"14px","&:hover":{backgroundColor:"#f3f4f6"},"&:active":{backgroundColor:"#e5e7eb"}}),multiValue:e=>(0,l.A)((0,l.A)({},e),{},{backgroundColor:"#3b82f6",borderRadius:"6px",margin:"2px"}),multiValueLabel:e=>(0,l.A)((0,l.A)({},e),{},{color:"#ffffff",fontWeight:"500",fontSize:"13px",padding:"4px 8px"}),multiValueRemove:e=>(0,l.A)((0,l.A)({},e),{},{color:"#ffffff","&:hover":{backgroundColor:"#2563eb",color:"#ffffff"}}),placeholder:e=>(0,l.A)((0,l.A)({},e),{},{color:"#9ca3af",fontSize:"14px"}),singleValue:e=>(0,l.A)((0,l.A)({},e),{},{fontSize:"14px",color:"#374151"}),input:e=>(0,l.A)((0,l.A)({},e),{},{fontSize:"14px"}),valueContainer:e=>(0,l.A)((0,l.A)({},e),{},{padding:"8px 12px"}),indicatorsContainer:e=>(0,l.A)((0,l.A)({},e),{},{paddingRight:"8px"})}})}):(0,p.jsx)("div",{className:"text-center py-4 bg-light rounded border",children:(0,p.jsxs)("p",{className:"text-muted mb-0",children:[(0,p.jsx)("i",{className:"fas fa-info-circle me-2"}),"Please select a main skill first"]})}),(0,p.jsx)(I.A.Text,{className:"text-muted mt-2",children:w?"Please select sub-skills for your new skill":"Select sub-skills related to your main skill"})]})]}),(0,p.jsxs)(B.A.Footer,{children:[(0,p.jsx)(m.A,{variant:"secondary",onClick:a,disabled:x,children:"Cancel"}),(0,p.jsx)(m.A,{variant:"primary",type:"submit",disabled:x||!d.labourSkill||!d.labourName||w&&0===d.labourSubSkills.length,children:x?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.A,{as:"span",animation:"border",size:"sm",className:"me-2"}),"Updating..."]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.uO9,{className:"me-2"}),"Update Details"]})})]})]})]})},E=()=>{(0,F.zy)();const[e,s]=(0,t.useState)(null),[a,u]=(0,t.useState)([]),[b,h]=(0,t.useState)([]),[g,j]=(0,t.useState)(0),[N,v]=(0,t.useState)(0),[f,y]=(0,t.useState)(!0),[A,w]=(0,t.useState)(!1),[S,C]=(0,t.useState)(!1),[B,T]=(0,t.useState)(!1),[O,E]=(0,t.useState)(null),[M,_]=(0,t.useState)({sortBy:"reviewTime",sortOrder:"desc"}),[q,V]=(0,t.useState)({sortBy:"bookingTime",sortOrder:"desc"}),[U,J]=(0,t.useState)(null),[X,Y]=(0,t.useState)(!1),G=(0,F.Zp)();(0,t.useEffect)((()=>{const e=localStorage.getItem("labour");if(!e)return void G("/labourLogin");const a=JSON.parse(e);s(a),y(!1)}),[G]),(0,t.useEffect)((()=>{e&&($(!0),W(),K())}),[e]),(0,t.useEffect)((()=>{e&&W()}),[M,e]);const $=async function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{s?y(!0):T(!0);const a=await P.n.getRequestedServices(null===e||void 0===e?void 0:e.labourId);a&&a.returnValue&&u(a.returnValue)}catch(O){console.error("Error fetching services:",O)}finally{s?y(!1):T(!1)}},W=async()=>{try{w(!0);const s=await P.n.getReviews(null===e||void 0===e?void 0:e.labourId,M.sortBy,M.sortOrder);s&&s.returnValue?h(s.returnValue):h([])}catch(O){console.error("Error fetching reviews:",O),h([])}finally{w(!1)}},K=async()=>{try{C(!0);const s=await P.n.getOverallRatings(null===e||void 0===e?void 0:e.labourId);if(s&&s.returnValue&&!s.hasError){const e=parseFloat(s.returnValue.overallRating)||0,a=parseInt(s.returnValue.ratingCount)||0;j(e),v(a)}else j(0),v(0)}catch(O){console.error("Error fetching overall ratings:",O),j(0),v(0)}finally{C(!1)}},Z=async(s,a)=>{try{J(s);const l=await P.n.updateBookingStatus(e.labourId,s,a);l&&l.returnValue&&await $(!1)}catch(O){console.error("Error updating service status:",O),E("Failed to update service status")}finally{J(null)}},Q=e=>{const{name:s,value:a}=e.target;_((e=>(0,l.A)((0,l.A)({},e),{},{[s]:a})))},ee=e=>{switch(e){case-1:return(0,p.jsxs)(i.A,{bg:"danger",className:"px-3 py-2",children:[(0,p.jsx)(L._Hm,{className:"me-1"})," Rejected"]});case 1:return(0,p.jsxs)(i.A,{bg:"warning",className:"px-3 py-2",children:[(0,p.jsx)(L.w_X,{className:"me-1"})," Pending"]});case 2:return(0,p.jsxs)(i.A,{bg:"primary",className:"px-3 py-2",children:[(0,p.jsx)(L.A7C,{className:"me-1"})," Accepted"]});case 3:return(0,p.jsxs)(i.A,{bg:"success",className:"px-3 py-2",children:[(0,p.jsx)(L.w_X,{className:"me-1"})," Completed"]});default:return(0,p.jsxs)(i.A,{bg:"secondary",className:"px-3 py-2",children:[(0,p.jsx)(L.w_X,{className:"me-1"})," Unknown"]})}},se=e=>{if(!e)return"N/A";try{let s;if(e.match(/^\d{2}-\d{2}-\d{4}/)){const a=e.split(" "),l=a[0],t=a[1]||"00:00:00",[i,n,r]=l.split("-"),c="".concat(r,"-").concat(n,"-").concat(i,"T").concat(t);s=new Date(c)}else s=new Date(e);if(isNaN(s.getTime()))return"Invalid Date";const a=s.getDate().toString().padStart(2,"0"),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],t=s.getFullYear().toString().slice(-2);return"".concat(a," ").concat(l," ").concat(t)}catch(O){return console.error("Error formatting date:",O),"Invalid Date"}};return f?(0,p.jsx)("div",{className:"text-center py-4",children:(0,p.jsx)(n.A,{animation:"border",role:"status",children:(0,p.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):O?(0,p.jsx)(r.A,{variant:"danger",children:O}):e?(0,p.jsxs)(c.A,{fluid:!0,className:"dashboard-container bg-light min-vh-100",children:[(0,p.jsx)("div",{className:"dashboard-header bg-white shadow-sm border-bottom",children:(0,p.jsx)(c.A,{children:(0,p.jsx)(d.A,{className:"py-3 py-md-4",children:(0,p.jsx)(o.A,{children:(0,p.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center mb-3 mb-md-0 w-100 w-md-auto",children:[(0,p.jsx)("div",{className:"profile-badge me-3 me-md-4",children:(0,p.jsx)("div",{className:"avatar-professional",children:(0,p.jsx)(L.p7b,{className:"text-primary",size:24})})}),(0,p.jsxs)("div",{className:"flex-grow-1",children:[(0,p.jsx)("h1",{className:"h4 h-md-3 mb-1 fw-bold text-dark",children:e.labourName}),(0,p.jsxs)("div",{className:"d-flex flex-column flex-sm-row align-items-start align-items-sm-center text-muted mb-2 gap-2 gap-sm-3",children:[(0,p.jsxs)("span",{className:"small",children:["ID: ",e.labourId]}),(0,p.jsx)(i.A,{bg:"primary",className:"me-0 me-sm-3",children:e.labourSkill}),(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)(L.gt3,{className:"text-warning me-1",size:14}),(0,p.jsx)("span",{className:"fw-semibold",children:g.toFixed(1)}),(0,p.jsxs)("span",{className:"text-muted ms-1",children:["(",N,")"]})]})]}),e.labourSubSkills&&e.labourSubSkills.length>0&&(0,p.jsxs)("div",{className:"d-flex flex-column flex-sm-row align-items-start align-items-sm-center",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center mb-1 mb-sm-0",children:[(0,p.jsx)(L.svy,{className:"text-muted me-2",size:12}),(0,p.jsx)("span",{className:"text-muted small me-2",children:"Specializations:"})]}),(0,p.jsx)("div",{className:"d-flex flex-wrap gap-1",children:e.labourSubSkills.map(((e,s)=>(0,p.jsx)(i.A,{bg:"light",text:"dark",className:"px-2 py-1 small",style:{fontSize:"0.7rem"},children:"string"===typeof e?e:e.subSkillName||e.name||e},s)))})]})]})]}),(0,p.jsxs)("div",{className:"d-flex gap-2 align-self-stretch align-self-md-auto",children:[(0,p.jsxs)(m.A,{variant:"outline-primary",onClick:()=>{Y(!0)},className:"d-flex align-items-center justify-content-center flex-grow-1 flex-md-grow-0",size:"sm",children:[(0,p.jsx)(L.uO9,{className:"me-1 me-md-2",size:14}),(0,p.jsx)("span",{className:"d-none d-sm-inline",children:"Edit Profile"}),(0,p.jsx)("span",{className:"d-inline d-sm-none",children:"Edit"})]}),(0,p.jsxs)(m.A,{variant:"outline-danger",onClick:()=>{localStorage.removeItem("labour"),G("/labourLogin")},className:"d-flex align-items-center justify-content-center flex-grow-1 flex-md-grow-0",size:"sm",children:[(0,p.jsx)(L.axc,{className:"me-1 me-md-2",size:14}),(0,p.jsx)("span",{className:"d-none d-sm-inline",children:"Logout"}),(0,p.jsx)("span",{className:"d-inline d-sm-none",children:"Exit"})]})]})]})})})})}),(0,p.jsxs)(c.A,{className:"py-2 py-md-4",children:[(0,p.jsx)(d.A,{className:"mb-3 mb-md-4",children:(0,p.jsx)(o.A,{children:(0,p.jsx)(x.A,{className:"border-0 shadow-sm",children:(0,p.jsxs)(x.A.Body,{className:"p-3 p-md-4",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,p.jsxs)("h4",{className:"mb-0 fw-bold text-dark",children:[(0,p.jsx)(L.YYR,{className:"me-2 text-primary"}),"Performance Analytics"]}),(0,p.jsx)(m.A,{variant:"outline-primary",size:"sm",onClick:()=>{$(!1),K()},disabled:B||S,children:B||S?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.A,{animation:"border",size:"sm",className:"me-2"}),"Refreshing..."]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.DIg,{className:"me-2"}),"Refresh Data"]})})]}),S||B?(0,p.jsxs)("div",{className:"text-center py-5",children:[(0,p.jsx)(n.A,{animation:"border",className:"text-primary mb-3"}),(0,p.jsx)("p",{className:"text-muted",children:"Loading analytics..."})]}):(0,p.jsx)(d.A,{children:(0,p.jsx)(o.A,{lg:12,children:(0,p.jsx)(d.A,{className:"g-3",children:(()=>{const e=(()=>{const e=a||[],s=e.length,l=e.filter((e=>3===e.bookingStatusCode)).length,t=e.filter((e=>2===e.bookingStatusCode)).length,i=e.filter((e=>1===e.bookingStatusCode)).length,n=e.filter((e=>-1===e.bookingStatusCode)).length;return{total:s,completed:l,accepted:t,pending:i,rejected:n,completionRate:s>0?l/s*100:0,acceptanceRate:s>0?(t+l)/s*100:0,responseRate:s>0?(s-i)/s*100:0,rejectionRate:s>0?n/s*100:0}})(),s=(()=>{const e=(a||[]).filter((e=>{const s=new Date(e.bookingTime),a=new Date;return a.setDate(a.getDate()-30),s>=a}));return{recentBookings:e.length,recentCompleted:e.filter((e=>3===e.bookingStatusCode)).length,recentRating:b&&b.length>0?b.slice(0,5).reduce(((e,s)=>e+s.rating),0)/Math.min(5,b.length):0}})();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{xs:6,md:2,children:(0,p.jsx)("div",{className:"metric-card h-100 p-2 p-md-3 bg-primary bg-opacity-10 rounded",children:(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"metric-value text-primary fw-bold h5 h-md-4 mb-1",children:e.total}),(0,p.jsx)("div",{className:"metric-label text-muted small",children:"Total Bookings"})]}),(0,p.jsx)(L.POv,{className:"text-primary opacity-75 d-none d-md-block",size:20}),(0,p.jsx)(L.POv,{className:"text-primary opacity-75 d-block d-md-none",size:16})]})})}),(0,p.jsx)(o.A,{xs:6,md:2,children:(0,p.jsxs)("div",{className:"metric-card h-100 p-2 p-md-3 bg-success bg-opacity-10 rounded",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"metric-value text-success fw-bold h5 h-md-4 mb-1",children:[e.completionRate.toFixed(1),"%"]}),(0,p.jsx)("div",{className:"metric-label text-muted small",children:"Completion Rate"})]}),(0,p.jsx)(L.A7C,{className:"text-success opacity-75 d-none d-md-block",size:20}),(0,p.jsx)(L.A7C,{className:"text-success opacity-75 d-block d-md-none",size:16})]}),(0,p.jsx)(k,{variant:"success",now:e.completionRate,className:"mt-2",style:{height:"3px"}})]})}),(0,p.jsx)(o.A,{xs:6,md:2,children:(0,p.jsxs)("div",{className:"metric-card h-100 p-2 p-md-3 bg-info bg-opacity-10 rounded",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"metric-value text-info fw-bold h5 h-md-4 mb-1",children:[e.acceptanceRate.toFixed(1),"%"]}),(0,p.jsx)("div",{className:"metric-label text-muted small",children:"Acceptance Rate"})]}),(0,p.jsx)(L.DDN,{className:"text-info opacity-75 d-none d-md-block",size:20}),(0,p.jsx)(L.DDN,{className:"text-info opacity-75 d-block d-md-none",size:16})]}),(0,p.jsx)(k,{variant:"info",now:e.acceptanceRate,className:"mt-2",style:{height:"3px"}})]})}),(0,p.jsx)(o.A,{xs:6,md:3,children:(0,p.jsxs)("div",{className:"metric-card h-100 p-2 p-md-3 bg-danger bg-opacity-10 rounded",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"metric-value text-danger fw-bold h5 h-md-4 mb-1",children:[e.rejectionRate.toFixed(1),"%"]}),(0,p.jsx)("div",{className:"metric-label text-muted small",children:"Rejection Rate"})]}),(0,p.jsx)(L._Hm,{className:"text-danger opacity-75 d-none d-md-block",size:20}),(0,p.jsx)(L._Hm,{className:"text-danger opacity-75 d-block d-md-none",size:16})]}),(0,p.jsx)(k,{variant:"danger",now:e.rejectionRate,className:"mt-2",style:{height:"3px"}})]})}),(0,p.jsx)(o.A,{xs:12,md:3,children:(0,p.jsx)("div",{className:"metric-card h-100 p-2 p-md-3 bg-warning bg-opacity-10 rounded",children:(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"metric-value text-warning fw-bold h5 h-md-4 mb-1",children:s.recentBookings}),(0,p.jsx)("div",{className:"metric-label text-muted small",children:"Recent Bookings"}),(0,p.jsx)("div",{className:"metric-sublabel text-muted",style:{fontSize:"0.7rem"},children:"Last 30 Days"})]}),(0,p.jsx)(L.v$b,{className:"text-warning opacity-75 d-none d-md-block",size:20}),(0,p.jsx)(L.v$b,{className:"text-warning opacity-75 d-block d-md-none",size:16})]})})})]})})()})})})]})})})}),(0,p.jsx)(d.A,{className:"mb-3 mb-md-4",children:(0,p.jsx)(o.A,{children:(0,p.jsx)(x.A,{className:"border-0 shadow-sm",children:(0,p.jsxs)(x.A.Body,{className:"p-3 p-md-4",children:[(0,p.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3",children:[(0,p.jsxs)("h4",{className:"mb-0 fw-bold text-dark",children:[(0,p.jsx)(L.w_X,{className:"me-2 text-primary"}),"Service Requests"]}),(0,p.jsxs)("div",{className:"d-flex align-items-center gap-2 gap-md-3",children:[(0,p.jsx)(m.A,{variant:"outline-primary",size:"sm",onClick:()=>$(!1),disabled:B,className:"d-flex align-items-center",children:B?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.A,{animation:"border",size:"sm",className:"me-1 me-md-2"}),(0,p.jsx)("span",{className:"d-none d-sm-inline",children:"Refreshing..."}),(0,p.jsx)("span",{className:"d-inline d-sm-none",children:"..."})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.DIg,{className:"me-1 me-md-2"}),(0,p.jsx)("span",{className:"d-none d-sm-inline",children:"Refresh"}),(0,p.jsx)("span",{className:"d-inline d-sm-none",children:"Sync"})]})}),(0,p.jsxs)(i.A,{bg:"warning",className:"px-2 px-md-3 py-1 py-md-2",children:[(a||[]).filter((e=>1===e.bookingStatusCode)).length," Pending"]})]})]}),O&&(0,p.jsxs)(r.A,{variant:"danger",className:"mb-4",children:[(0,p.jsx)(L._Hm,{className:"me-2"}),O]}),(a||[]).length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"table-responsive d-none d-lg-block",children:(0,p.jsxs)(z,{className:"table-modern",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"border-0 bg-light fw-semibold text-dark",children:"Booking"}),(0,p.jsx)("th",{className:"border-0 bg-light fw-semibold text-dark",children:"Client"}),(0,p.jsx)("th",{className:"border-0 bg-light fw-semibold text-dark",children:"Service"}),(0,p.jsx)("th",{className:"border-0 bg-light fw-semibold text-dark",children:"Date"}),(0,p.jsx)("th",{className:"border-0 bg-light fw-semibold text-dark",children:"Status"}),(0,p.jsx)("th",{className:"border-0 bg-light fw-semibold text-dark text-center",children:"Actions"})]})}),(0,p.jsx)("tbody",{children:(a||[]).map((e=>(0,p.jsxs)("tr",{className:"border-bottom",children:[(0,p.jsxs)("td",{className:"py-3",children:[(0,p.jsxs)("div",{className:"fw-bold text-primary",children:["#",e.bookingId]}),(0,p.jsx)("small",{className:"text-muted",children:"ID"})]}),(0,p.jsx)("td",{className:"py-3",children:(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)("div",{className:"avatar-sm bg-light rounded-circle me-3 d-flex align-items-center justify-content-center",children:(0,p.jsx)(L.x$1,{className:"text-muted",size:14})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"fw-semibold",children:e.userName||"Anonymous"}),(0,p.jsx)("small",{className:"text-muted",children:e.userMobileNumber})]})]})}),(0,p.jsx)("td",{className:"py-3",children:(0,p.jsx)(i.A,{bg:"primary",className:"px-3 py-2",children:e.labourSkill})}),(0,p.jsxs)("td",{className:"py-3",children:[(0,p.jsx)("div",{className:"fw-semibold",children:se(e.bookingTime)}),(0,p.jsx)("small",{className:"text-muted",children:"Requested"})]}),(0,p.jsx)("td",{className:"py-3",children:ee(e.bookingStatusCode)}),(0,p.jsx)("td",{className:"py-3 text-center",children:(0,p.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[1===e.bookingStatusCode&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m.A,{variant:"success",size:"sm",onClick:()=>Z(e.bookingId,2),disabled:U===e.bookingId,className:"px-3",children:U===e.bookingId?(0,p.jsx)(n.A,{as:"span",animation:"border",size:"sm"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.A7C,{className:"me-1",size:12}),"Accept"]})}),(0,p.jsx)(m.A,{variant:"outline-danger",size:"sm",onClick:()=>Z(e.bookingId,-1),disabled:U===e.bookingId,className:"px-3",children:U===e.bookingId?(0,p.jsx)(n.A,{as:"span",animation:"border",size:"sm"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L._Hm,{className:"me-1",size:12}),"Decline"]})})]}),2===e.bookingStatusCode&&(0,p.jsx)(m.A,{variant:"primary",size:"sm",onClick:()=>Z(e.bookingId,3),disabled:U===e.bookingId,className:"px-3",children:U===e.bookingId?(0,p.jsx)(n.A,{as:"span",animation:"border",size:"sm"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.A7C,{className:"me-1",size:12}),"Complete"]})}),3===e.bookingStatusCode&&(0,p.jsxs)(i.A,{bg:"success",className:"px-3 py-2",children:[(0,p.jsx)(L.A7C,{className:"me-1",size:12}),"Completed"]}),-1===e.bookingStatusCode&&(0,p.jsx)(m.A,{variant:"outline-success",size:"sm",onClick:()=>Z(e.bookingId,2),disabled:U===e.bookingId,className:"px-3",children:U===e.bookingId?(0,p.jsx)(n.A,{as:"span",animation:"border",size:"sm"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.A7C,{className:"me-1",size:12}),"Reconsider"]})})]})})]},e.bookingId)))})]})}),(0,p.jsx)("div",{className:"d-block d-lg-none",children:(0,p.jsx)("div",{className:"mobile-services-list",children:(a||[]).map((e=>(0,p.jsxs)("div",{className:"mobile-service-card p-3 mb-3 border rounded bg-white",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)("div",{className:"avatar-sm bg-light rounded-circle me-3 d-flex align-items-center justify-content-center",children:(0,p.jsx)(L.x$1,{className:"text-muted",size:14})}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"fw-bold text-primary small",children:["#",e.bookingId]}),(0,p.jsx)("div",{className:"fw-semibold small",children:e.userName||"Anonymous"}),(0,p.jsx)("small",{className:"text-muted",children:e.userMobileNumber})]})]}),ee(e.bookingStatusCode)]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,p.jsx)(i.A,{bg:"primary",className:"px-2 py-1",children:e.labourSkill}),(0,p.jsxs)("div",{className:"text-end",children:[(0,p.jsx)("div",{className:"fw-semibold small",children:se(e.bookingTime)}),(0,p.jsx)("small",{className:"text-muted",children:"Requested"})]})]}),(0,p.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[1===e.bookingStatusCode&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m.A,{variant:"success",size:"sm",onClick:()=>Z(e.bookingId,2),disabled:U===e.bookingId,className:"flex-grow-1",children:U===e.bookingId?(0,p.jsx)(n.A,{as:"span",animation:"border",size:"sm"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.A7C,{className:"me-1",size:12}),"Accept"]})}),(0,p.jsx)(m.A,{variant:"outline-danger",size:"sm",onClick:()=>Z(e.bookingId,-1),disabled:U===e.bookingId,className:"flex-grow-1",children:U===e.bookingId?(0,p.jsx)(n.A,{as:"span",animation:"border",size:"sm"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L._Hm,{className:"me-1",size:12}),"Decline"]})})]}),2===e.bookingStatusCode&&(0,p.jsx)(m.A,{variant:"primary",size:"sm",onClick:()=>Z(e.bookingId,3),disabled:U===e.bookingId,className:"w-100",children:U===e.bookingId?(0,p.jsx)(n.A,{as:"span",animation:"border",size:"sm"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.A7C,{className:"me-1",size:12}),"Mark as Complete"]})}),3===e.bookingStatusCode&&(0,p.jsx)("div",{className:"w-100 text-center",children:(0,p.jsxs)(i.A,{bg:"success",className:"px-3 py-2",children:[(0,p.jsx)(L.A7C,{className:"me-1",size:12}),"Completed"]})}),-1===e.bookingStatusCode&&(0,p.jsx)(m.A,{variant:"outline-success",size:"sm",onClick:()=>Z(e.bookingId,2),disabled:U===e.bookingId,className:"w-100",children:U===e.bookingId?(0,p.jsx)(n.A,{as:"span",animation:"border",size:"sm"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L.A7C,{className:"me-1",size:12}),"Reconsider"]})})]})]},e.bookingId)))})})]}):(0,p.jsxs)("div",{className:"text-center py-5",children:[(0,p.jsx)(L.w_X,{className:"text-muted mb-3",size:48}),(0,p.jsx)("h5",{className:"text-muted mb-2",children:"No Service Requests"}),(0,p.jsx)("p",{className:"text-muted",children:"You'll see new booking requests here"})]})]})})})}),(0,p.jsxs)(d.A,{children:[(0,p.jsx)(o.A,{lg:8,className:"mb-3 mb-md-4",children:(0,p.jsx)(x.A,{className:"border-0 shadow-sm h-100",children:(0,p.jsxs)(x.A.Body,{className:"p-3 p-md-4",children:[(0,p.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3",children:[(0,p.jsxs)("h4",{className:"mb-0 fw-bold text-dark",children:[(0,p.jsx)(L.gt3,{className:"me-2 text-warning"}),"Customer Reviews"]}),(0,p.jsxs)("div",{className:"d-flex gap-2 w-100 w-md-auto",children:[(0,p.jsxs)(I.A.Select,{name:"sortBy",value:M.sortBy,onChange:Q,size:"sm",className:"border-0 bg-light flex-grow-1",children:[(0,p.jsx)("option",{value:"reviewTime",children:"Latest First"}),(0,p.jsx)("option",{value:"rating",children:"By Rating"})]}),(0,p.jsxs)(I.A.Select,{name:"sortOrder",value:M.sortOrder,onChange:Q,size:"sm",className:"border-0 bg-light flex-grow-1",children:[(0,p.jsx)("option",{value:"desc",children:"High to Low"}),(0,p.jsx)("option",{value:"asc",children:"Low to High"})]})]})]}),(b||[]).length>0&&(0,p.jsxs)("div",{className:"mb-4 p-3 bg-light rounded",children:[(0,p.jsx)("h6",{className:"mb-3 fw-semibold",children:"Rating Distribution"}),(0,p.jsx)(d.A,{className:"g-2",children:(()=>{const e=(()=>{const e={5:0,4:0,3:0,2:0,1:0};return(b||[]).forEach((s=>{s.rating>=1&&s.rating<=5&&e[s.rating]++})),e})(),s=Object.values(e).reduce(((e,s)=>e+s),0);return[5,4,3,2,1].map((a=>(0,p.jsx)(o.A,{xs:12,children:(0,p.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center",style:{minWidth:"50px"},children:[(0,p.jsx)("span",{className:"me-1 small",children:a}),(0,p.jsx)(L.gt3,{className:"text-warning",size:12})]}),(0,p.jsx)("div",{className:"flex-grow-1",children:(0,p.jsx)(k,{variant:a>=4?"success":a>=3?"warning":"danger",now:s>0?e[a]/s*100:0,style:{height:"6px"}})}),(0,p.jsx)("span",{className:"text-muted small",style:{minWidth:"25px",textAlign:"right"},children:e[a]})]})},a)))})()})]}),(0,p.jsx)("div",{style:{maxHeight:"500px",overflowY:"auto"},children:(b||[]).length>0?(0,p.jsx)("div",{className:"reviews-list",children:(b||[]).map(((e,s)=>(0,p.jsxs)("div",{className:"review-card mb-3 p-3 p-md-4 bg-white border rounded shadow-sm",children:[(0,p.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start mb-3 gap-2",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center w-100",children:[(0,p.jsx)("div",{className:"avatar-lg bg-primary bg-opacity-10 rounded-circle me-3 d-flex align-items-center justify-content-center",children:(0,p.jsx)(L.x$1,{className:"text-primary",size:16})}),(0,p.jsxs)("div",{className:"flex-grow-1",children:[(0,p.jsx)("h6",{className:"mb-1 fw-semibold small",children:e.userName||"Anonymous Customer"}),(0,p.jsxs)("div",{className:"d-flex flex-column flex-sm-row align-items-start align-items-sm-center gap-1 gap-sm-2",children:[(0,p.jsx)("div",{className:"rating-stars",children:[...Array(5)].map(((s,a)=>(0,p.jsx)(L.gt3,{className:a<e.rating?"text-warning":"text-muted",size:12},a)))}),(0,p.jsx)("span",{className:"text-muted small",children:se(e.reviewTime)})]})]})]}),(0,p.jsxs)(i.A,{bg:e.rating>=4?"success":e.rating>=3?"warning":"danger",className:"px-2 py-1 align-self-end align-self-md-start",children:[e.rating,"/5"]})]}),e.review&&(0,p.jsx)("div",{className:"review-content",children:(0,p.jsxs)("div",{className:"position-relative",children:[(0,p.jsx)(L.JwJ,{className:"text-muted position-absolute d-none d-md-block",style:{top:"-5px",left:"-5px",fontSize:"20px",opacity:.3}}),(0,p.jsx)("p",{className:"mb-0 ps-0 ps-md-3",style:{fontSize:"0.9rem",lineHeight:"1.5",color:"#555"},children:e.review})]})})]},s)))}):A?(0,p.jsxs)("div",{className:"text-center py-5",children:[(0,p.jsx)(n.A,{animation:"border",className:"text-primary mb-3"}),(0,p.jsx)("p",{className:"text-muted",children:"Loading reviews..."})]}):(0,p.jsxs)("div",{className:"text-center py-5",children:[(0,p.jsx)(L.gt3,{className:"text-muted mb-3",size:48}),(0,p.jsx)("h5",{className:"text-muted mb-2",children:"No Reviews Yet"}),(0,p.jsx)("p",{className:"text-muted",children:"Customer reviews will appear here"})]})})]})})}),(0,p.jsx)(o.A,{lg:4,className:"mb-3 mb-md-4",children:(0,p.jsx)(x.A,{className:"border-0 shadow-sm h-100",children:(0,p.jsxs)(x.A.Body,{className:"p-3 p-md-4",children:[(0,p.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3",children:[(0,p.jsxs)("h4",{className:"mb-0 fw-bold text-dark",children:[(0,p.jsx)(L.OKX,{className:"me-2 text-primary"}),"Recent Activity"]}),(0,p.jsxs)("div",{className:"d-flex gap-2 w-100 w-md-auto",children:[(0,p.jsxs)(I.A.Select,{name:"sortOrder",value:q.sortOrder,onChange:e=>{const{name:s,value:a}=e.target;V((e=>(0,l.A)((0,l.A)({},e),{},{[s]:a})))},size:"sm",className:"border-0 bg-light flex-grow-1",children:[(0,p.jsx)("option",{value:"desc",children:"Latest First"}),(0,p.jsx)("option",{value:"asc",children:"Oldest First"})]}),(0,p.jsx)(m.A,{variant:"outline-primary",size:"sm",onClick:()=>$(!1),disabled:B,className:"flex-shrink-0",children:B?(0,p.jsx)(n.A,{animation:"border",size:"sm"}):(0,p.jsx)(L.DIg,{size:12})})]})]}),(0,p.jsx)("div",{style:{maxHeight:"600px",overflowY:"auto"},children:(a||[]).length>0?(0,p.jsx)("div",{className:"activity-list",children:(()=>{if(!a||0===a.length)return[];return[...a].sort(((e,s)=>{const{sortBy:a,sortOrder:l}=q;if("bookingTime"===a){const a=new Date(e.bookingTime),t=new Date(s.bookingTime);return"desc"===l?t-a:a-t}return 0}))})().slice(0,10).map((e=>(0,p.jsxs)("div",{className:"activity-item p-3 mb-3 border rounded bg-white",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)("div",{className:"activity-icon me-3",children:(0,p.jsx)("div",{className:"rounded-circle p-2 ".concat(3===e.bookingStatusCode?"bg-success bg-opacity-10":2===e.bookingStatusCode?"bg-primary bg-opacity-10":1===e.bookingStatusCode?"bg-warning bg-opacity-10":"bg-danger bg-opacity-10"),children:3===e.bookingStatusCode?(0,p.jsx)(L.A7C,{className:"text-success",size:16}):2===e.bookingStatusCode?(0,p.jsx)(L.DDN,{className:"text-primary",size:16}):1===e.bookingStatusCode?(0,p.jsx)(L.w_X,{className:"text-warning",size:16}):(0,p.jsx)(L._Hm,{className:"text-danger",size:16})})}),(0,p.jsxs)("div",{className:"flex-grow-1",children:[(0,p.jsxs)("div",{className:"fw-semibold small",children:["#",e.bookingId]}),(0,p.jsx)("div",{className:"text-muted small",children:e.userName||"Anonymous"})]})]}),ee(e.bookingStatusCode)]}),(0,p.jsx)("div",{className:"activity-details",children:(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,p.jsx)(i.A,{bg:"light",text:"dark",className:"px-2 py-1",children:e.labourSkill}),(0,p.jsx)("small",{className:"text-muted",children:se(e.bookingTime)})]})})]},e.bookingId)))}):(0,p.jsxs)("div",{className:"text-center py-5",children:[(0,p.jsx)(L.OKX,{className:"text-muted mb-3",size:48}),(0,p.jsx)("h5",{className:"text-muted mb-2",children:"No Activity"}),(0,p.jsx)("p",{className:"text-muted",children:"Booking history will appear here"})]})})]})})})]}),(0,p.jsx)(d.A,{className:"mt-4",children:(0,p.jsx)(o.A,{children:(0,p.jsx)(x.A,{className:"border-0 bg-light",children:(0,p.jsx)(x.A.Body,{className:"p-3",children:(0,p.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("h6",{className:"mb-1 text-muted",children:[(0,p.jsx)(L.Pcn,{className:"me-2",size:14}),"Account Management"]}),(0,p.jsx)("p",{className:"mb-0 small text-muted",children:"Manage your account settings and preferences"})]}),(0,p.jsx)("div",{className:"d-flex gap-2",children:(0,p.jsx)(R.A,{placement:"top",overlay:(0,p.jsx)(D.A,{children:"This action cannot be undone"}),children:(0,p.jsxs)(m.A,{variant:"outline-danger",size:"sm",onClick:async()=>{if(window.confirm("Are you sure you want to delete your account? This action cannot be undone."))try{y(!0),await P.n.deleteLabour(e.labourId),localStorage.removeItem("labour"),alert("Your account has been deleted."),G("/labourLogin")}catch(s){alert("Failed to delete account. Please try again.")}finally{y(!1)}},className:"d-flex align-items-center opacity-75",style:{fontSize:"0.8rem"},children:[(0,p.jsx)(L.RCe,{className:"me-1 me-md-2",size:12}),(0,p.jsx)("span",{className:"d-none d-sm-inline",children:"Delete Profile"}),(0,p.jsx)("span",{className:"d-inline d-sm-none",children:"Delete"})]})})})]})})})})})]}),(0,p.jsx)(H,{show:X,onHide:()=>Y(!1),labourDetails:e,onUpdateSuccess:e=>{s(e)}})]}):(0,p.jsx)(r.A,{variant:"warning",children:"No labour details found"})}},9539:(e,s,a)=>{a.d(s,{n:()=>i});var l=a(9722);const t="".concat("http://localhost:4000","/labourapp"),i={getRequestedServices:async e=>{try{const s="".concat(t,"/labour/showRequestedServices/").concat(e);return(await l.A.get(s)).data}catch(s){throw s}},getReviews:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reviewTime",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc";try{const i="".concat(t,"/labour/showMyReviews/").concat(e,"?sortBy=").concat(s,"&sortOrder=").concat(a),n=localStorage.getItem("user"),r=localStorage.getItem("token")||localStorage.getItem("authToken"),c={};if(r)c.Authorization="Bearer ".concat(r);else if(n){const e=JSON.parse(n);e.token&&(c.Authorization="Bearer ".concat(e.token))}const d=await l.A.get(i,{headers:c});if(d.data.hasError)throw new Error(d.data.message||"Failed to fetch reviews");return d.data.returnValue||[]}catch(i){return console.error("Reviews API error:",i.message),[]}},getOverallRatings:async e=>{try{const s="".concat(t,"/labour/showMyRatings/").concat(e);return(await l.A.get(s)).data}catch(s){throw s}},updateBookingStatus:async(e,s,a)=>{try{const i="".concat(t,"/labour/setBookingStatus?labourId=").concat(e,"&bookingId=").concat(s,"&bookingStatusCode=").concat(a);return(await l.A.get(i)).data}catch(i){throw i}},showRequestedServices:async e=>{try{const s="".concat(t,"/labour/showRequestedServices/").concat(e);return(await l.A.get(s)).data}catch(s){throw s}},getLabourById:async e=>{try{const s="".concat(t,"/labourReq/getLabourById/").concat(e),a=await l.A.get(s);if(a.data.hasError)throw new Error(a.data.message||"Failed to fetch labour details");return a.data.returnValue}catch(s){throw s}},registerLabour:async(e,s)=>{try{const a="".concat(t,"/auth/registerLabour?otp=").concat(s);return(await l.A.post(a,e)).data}catch(i){var a;throw(null===(a=i.response)||void 0===a?void 0:a.data)||i.message}},loginLabour:async(e,s)=>{try{const a="".concat(t,"/auth/labourLogin?mobileNumber=").concat(e,"&otp=").concat(s);return(await l.A.get(a)).data}catch(i){var a;throw(null===(a=i.response)||void 0===a?void 0:a.data)||i.message}},requestOTP:async(e,s)=>{try{const a="".concat(t,"/auth/requestOTP");return(await l.A.post(a,{mobile:e,role:s})).data}catch(i){var a;throw(null===(a=i.response)||void 0===a?void 0:a.data)||i.message}},deleteLabour:async e=>{try{const s="".concat(t,"/admin/removeLabour/").concat(e);return(await l.A.delete(s)).data}catch(a){var s;throw(null===(s=a.response)||void 0===s?void 0:s.data)||a.message}},updateLabourDetails:async e=>{try{const s="".concat(t,"/labour/updateLabourDetails");return(await l.A.patch(s,e)).data}catch(a){var s;throw(null===(s=a.response)||void 0===s?void 0:s.data)||a.message}}}}}]);
//# sourceMappingURL=581.4f013a25.chunk.js.map