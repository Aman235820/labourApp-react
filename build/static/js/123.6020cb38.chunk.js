"use strict";(self.webpackChunklabour_app_react=self.webpackChunklabour_app_react||[]).push([[123],{123:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var r=s(5043),t=s(4063),c=s(3519),o=s(1072),n=s(8602),l=s(8628),i=s(3204),d=s(3216),m=s(9539),u=s(579);const h=function(){const[e,a]=(0,r.useState)([]),[s,h]=(0,r.useState)(!0),[x,b]=(0,r.useState)(null),{labourId:f}=(0,d.g)();(0,r.useEffect)((()=>{g()}),[f]);const g=async()=>{try{h(!0);const e=await m.n.showRequestedServices(f);e.data&&e.data.returnValue&&a(e.data.returnValue)}catch(x){b("Failed to fetch booking history"),console.error("Error fetching bookings:",x)}finally{h(!1)}},N=e=>{switch(e){case 1:return(0,u.jsxs)(t.A,{bg:"warning",className:"px-3 py-2",children:[(0,u.jsx)(i.w_X,{className:"me-1"})," Pending"]});case 2:return(0,u.jsxs)(t.A,{bg:"success",className:"px-3 py-2",children:[(0,u.jsx)(i.A7C,{className:"me-1"})," Accepted"]});case 3:return(0,u.jsxs)(t.A,{bg:"danger",className:"px-3 py-2",children:[(0,u.jsx)(i._Hm,{className:"me-1"})," Rejected"]});default:return(0,u.jsxs)(t.A,{bg:"secondary",className:"px-3 py-2",children:[(0,u.jsx)(i.w_X,{className:"me-1"})," Unknown"]})}};return s?(0,u.jsx)(c.A,{className:"py-5",children:(0,u.jsx)("div",{className:"text-center",children:(0,u.jsx)("div",{className:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"},children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):x?(0,u.jsx)(c.A,{className:"py-5",children:(0,u.jsx)("div",{className:"alert alert-danger",role:"alert",children:x})}):(0,u.jsxs)(c.A,{className:"py-5",children:[(0,u.jsx)(o.A,{className:"mb-4",children:(0,u.jsx)(n.A,{children:(0,u.jsx)("h2",{className:"display-6 mb-4",children:"Booking History"})})}),(0,u.jsx)(o.A,{children:e.map((e=>{return(0,u.jsx)(n.A,{md:6,lg:4,className:"mb-4",children:(0,u.jsx)(l.A,{className:"h-100 shadow-sm hover-card",children:(0,u.jsxs)(l.A.Body,{children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,u.jsxs)("h5",{className:"card-title mb-0",children:["Booking #",e.bookingId]}),N(e.bookingStatusCode)]}),(0,u.jsx)("div",{className:"booking-details",children:(0,u.jsxs)("div",{className:"mb-3",children:[(0,u.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,u.jsx)(i.x$1,{className:"text-primary me-2"}),(0,u.jsxs)("span",{className:"fw-medium",children:["Client: ",e.userName||"Anonymous"]})]}),(0,u.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,u.jsx)(i.Cab,{className:"text-primary me-2"}),(0,u.jsxs)("span",{className:"fw-medium",children:["Phone: ",e.userMobileNumber]})]}),(0,u.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,u.jsx)(i.xdT,{className:"text-primary me-2"}),(0,u.jsxs)("span",{className:"fw-medium",children:["Service: ",e.labourSkill]})]}),(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)(i.bfZ,{className:"text-primary me-2"}),(0,u.jsxs)("span",{className:"fw-medium",children:["Date: ",(a=e.bookingTime,new Date(a).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]})]})})]})})},e.bookingId);var a}))}),0===e.length&&(0,u.jsx)(o.A,{children:(0,u.jsx)(n.A,{children:(0,u.jsx)("div",{className:"text-center py-5",children:(0,u.jsx)("p",{className:"text-muted fs-5",children:"No booking history found."})})})})]})}},4063:(e,a,s)=>{s.d(a,{A:()=>u});var r=s(9379),t=s(45),c=s(8139),o=s.n(c),n=s(5043),l=s(7852),i=s(579);const d=["bsPrefix","bg","pill","text","className","as"],m=n.forwardRef(((e,a)=>{let{bsPrefix:s,bg:c="primary",pill:n=!1,text:m,className:u,as:h="span"}=e,x=(0,t.A)(e,d);const b=(0,l.oU)(s,"badge");return(0,i.jsx)(h,(0,r.A)((0,r.A)({ref:a},x),{},{className:o()(u,b,n&&"rounded-pill",m&&"text-".concat(m),c&&"bg-".concat(c))}))}));m.displayName="Badge";const u=m},8628:(e,a,s)=>{s.d(a,{A:()=>V});var r=s(9379),t=s(45),c=s(8139),o=s.n(c),n=s(5043),l=s(7852),i=s(579);const d=["className","bsPrefix","as"],m=n.forwardRef(((e,a)=>{let{className:s,bsPrefix:c,as:n="div"}=e,m=(0,t.A)(e,d);return c=(0,l.oU)(c,"card-body"),(0,i.jsx)(n,(0,r.A)({ref:a,className:o()(s,c)},m))}));m.displayName="CardBody";const u=m,h=["className","bsPrefix","as"],x=n.forwardRef(((e,a)=>{let{className:s,bsPrefix:c,as:n="div"}=e,d=(0,t.A)(e,h);return c=(0,l.oU)(c,"card-footer"),(0,i.jsx)(n,(0,r.A)({ref:a,className:o()(s,c)},d))}));x.displayName="CardFooter";const b=x;var f=s(1778);const g=["bsPrefix","className","as"],N=n.forwardRef(((e,a)=>{let{bsPrefix:s,className:c,as:d="div"}=e,m=(0,t.A)(e,g);const u=(0,l.oU)(s,"card-header"),h=(0,n.useMemo)((()=>({cardHeaderBsPrefix:u})),[u]);return(0,i.jsx)(f.A.Provider,{value:h,children:(0,i.jsx)(d,(0,r.A)((0,r.A)({ref:a},m),{},{className:o()(c,u)}))})}));N.displayName="CardHeader";const y=N,p=["bsPrefix","className","variant","as"],w=n.forwardRef(((e,a)=>{let{bsPrefix:s,className:c,variant:n,as:d="img"}=e,m=(0,t.A)(e,p);const u=(0,l.oU)(s,"card-img");return(0,i.jsx)(d,(0,r.A)({ref:a,className:o()(n?"".concat(u,"-").concat(n):u,c)},m))}));w.displayName="CardImg";const v=w,A=["className","bsPrefix","as"],j=n.forwardRef(((e,a)=>{let{className:s,bsPrefix:c,as:n="div"}=e,d=(0,t.A)(e,A);return c=(0,l.oU)(c,"card-img-overlay"),(0,i.jsx)(n,(0,r.A)({ref:a,className:o()(s,c)},d))}));j.displayName="CardImgOverlay";const P=j,k=["className","bsPrefix","as"],R=n.forwardRef(((e,a)=>{let{className:s,bsPrefix:c,as:n="a"}=e,d=(0,t.A)(e,k);return c=(0,l.oU)(c,"card-link"),(0,i.jsx)(n,(0,r.A)({ref:a,className:o()(s,c)},d))}));R.displayName="CardLink";const S=R;var C=s(4488);const I=["className","bsPrefix","as"],B=(0,C.A)("h6"),L=n.forwardRef(((e,a)=>{let{className:s,bsPrefix:c,as:n=B}=e,d=(0,t.A)(e,I);return c=(0,l.oU)(c,"card-subtitle"),(0,i.jsx)(n,(0,r.A)({ref:a,className:o()(s,c)},d))}));L.displayName="CardSubtitle";const U=L,T=["className","bsPrefix","as"],q=n.forwardRef(((e,a)=>{let{className:s,bsPrefix:c,as:n="p"}=e,d=(0,t.A)(e,T);return c=(0,l.oU)(c,"card-text"),(0,i.jsx)(n,(0,r.A)({ref:a,className:o()(s,c)},d))}));q.displayName="CardText";const O=q,_=["className","bsPrefix","as"],E=(0,C.A)("h5"),F=n.forwardRef(((e,a)=>{let{className:s,bsPrefix:c,as:n=E}=e,d=(0,t.A)(e,_);return c=(0,l.oU)(c,"card-title"),(0,i.jsx)(n,(0,r.A)({ref:a,className:o()(s,c)},d))}));F.displayName="CardTitle";const H=F,D=["bsPrefix","className","bg","text","border","body","children","as"],M=n.forwardRef(((e,a)=>{let{bsPrefix:s,className:c,bg:n,text:d,border:m,body:h=!1,children:x,as:b="div"}=e,f=(0,t.A)(e,D);const g=(0,l.oU)(s,"card");return(0,i.jsx)(b,(0,r.A)((0,r.A)({ref:a},f),{},{className:o()(c,g,n&&"bg-".concat(n),d&&"text-".concat(d),m&&"border-".concat(m)),children:h?(0,i.jsx)(u,{children:x}):x}))}));M.displayName="Card";const V=Object.assign(M,{Img:v,Title:H,Subtitle:U,Body:u,Link:S,Text:O,Header:y,Footer:b,ImgOverlay:P})},9539:(e,a,s)=>{s.d(a,{n:()=>c});var r=s(9722);const t="".concat("http://localhost:4000","/labourapp"),c={getRequestedServices:async e=>{try{const a="".concat(t,"/labour/showRequestedServices/").concat(e);return(await r.A.get(a)).data}catch(a){throw a}},getReviews:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reviewTime",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc";try{const c="".concat(t,"/labour/showMyReviews/").concat(e,"?sortBy=").concat(a,"&sortOrder=").concat(s),o=localStorage.getItem("user"),n=localStorage.getItem("token")||localStorage.getItem("authToken"),l={};if(n)l.Authorization="Bearer ".concat(n);else if(o){const e=JSON.parse(o);e.token&&(l.Authorization="Bearer ".concat(e.token))}const i=await r.A.get(c,{headers:l});if(i.data.hasError)throw new Error(i.data.message||"Failed to fetch reviews");return i.data.returnValue||[]}catch(c){return console.error("Reviews API error:",c.message),[]}},getOverallRatings:async e=>{try{const a="".concat(t,"/labour/showMyRatings/").concat(e);return(await r.A.get(a)).data}catch(a){throw a}},updateBookingStatus:async(e,a,s)=>{try{const c="".concat(t,"/labour/setBookingStatus?labourId=").concat(e,"&bookingId=").concat(a,"&bookingStatusCode=").concat(s);return(await r.A.get(c)).data}catch(c){throw c}},showRequestedServices:async e=>{try{const a="".concat(t,"/labour/showRequestedServices/").concat(e);return(await r.A.get(a)).data}catch(a){throw a}},getLabourById:async e=>{try{const a="".concat(t,"/labourReq/getLabourById/").concat(e),s=await r.A.get(a);if(s.data.hasError)throw new Error(s.data.message||"Failed to fetch labour details");return s.data.returnValue}catch(a){throw a}},registerLabour:async(e,a)=>{try{const s="".concat(t,"/auth/registerLabour?otp=").concat(a);return(await r.A.post(s,e)).data}catch(c){var s;throw(null===(s=c.response)||void 0===s?void 0:s.data)||c.message}},loginLabour:async(e,a)=>{try{const s="".concat(t,"/auth/labourLogin?mobileNumber=").concat(e,"&otp=").concat(a);return(await r.A.get(s)).data}catch(c){var s;throw(null===(s=c.response)||void 0===s?void 0:s.data)||c.message}},requestOTP:async(e,a)=>{try{const s="".concat(t,"/auth/requestOTP");return(await r.A.post(s,{mobile:e,role:a})).data}catch(c){var s;throw(null===(s=c.response)||void 0===s?void 0:s.data)||c.message}},deleteLabour:async e=>{try{const a="".concat(t,"/admin/removeLabour/").concat(e);return(await r.A.delete(a)).data}catch(s){var a;throw(null===(a=s.response)||void 0===a?void 0:a.data)||s.message}},updateLabourDetails:async e=>{try{const a="".concat(t,"/labour/updateLabourDetails");return(await r.A.patch(a,e)).data}catch(s){var a;throw(null===(a=s.response)||void 0===a?void 0:a.data)||s.message}}}}}]);
//# sourceMappingURL=123.6020cb38.chunk.js.map