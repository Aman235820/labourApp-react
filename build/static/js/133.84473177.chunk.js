"use strict";(self.webpackChunklabour_app_react=self.webpackChunklabour_app_react||[]).push([[133],{3079:(e,a,s)=>{s.d(a,{D:()=>r});var t=s(9722);const l="".concat("http://localhost:4000","/labourapp/labourReq"),r=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rating",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"desc";try{const n=encodeURIComponent(e),i="".concat(l,"/findByCategory?category=").concat(n);console.log(i),console.log("Pagination params:",{pageNumber:a,pageSize:s,sortBy:r,sortOrder:o});return(await t.A.post(i,{pageNumber:a,pageSize:s,sortBy:r,sortOrder:o},{headers:{"Content-Type":"application/json"}})).data}catch(c){var n,i;throw new Error((null===(n=c.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Failed to fetch labor search results")}}},3133:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var t=s(5043),l=s(4282),r=s(3519),o=s(7417),n=s(3204),i=s(3216),c=s(8786),d=s(3079),m=s(7701),u=s(579);const x=function(){const e=(0,i.Zp)(),a=(0,i.zy)(),s=(0,t.useRef)(!0),{labourers:x=[],totalElements:g=0,totalPages:h=0,service:p="",currentPage:f=0,pageSize:b=10,error:N=null}=a.state||{},[j,v]=(0,t.useState)(x),[y,k]=(0,t.useState)(!1),[w,S]=(0,t.useState)(N),[C,A]=(0,t.useState)(f),[R,z]=(0,t.useState)(h),[B,P]=(0,t.useState)(b),[L,D]=(0,t.useState)(g),[H,_]=(0,t.useState)(null),[T,E]=(0,t.useState)(!1),I=[{name:"Name",selector:e=>e.labourName,sortable:!0,cell:e=>(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)(n.x$1,{className:"text-primary me-2",style:{fontSize:"1.2rem"}}),(0,u.jsx)("span",{className:"fw-medium text-primary",children:e.labourName})]})},{name:"Services",selector:e=>e.labourSkill,sortable:!0,cell:e=>(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)(n.xdT,{className:"text-success me-2",style:{fontSize:"1.2rem"}}),(0,u.jsx)("span",{className:"fw-medium",children:e.labourSkill})]})},{name:"Phone",selector:e=>e.labourMobileNo,cell:e=>(0,u.jsx)("div",{className:"d-flex align-items-center",children:(0,u.jsxs)(l.A,{variant:"outline-primary",size:"sm",onClick:()=>window.location.href="tel:".concat(e.labourMobileNo),className:"d-flex align-items-center",children:[(0,u.jsx)(n.Cab,{className:"me-2"}),"Call Now"]})})},{name:"Rating",selector:e=>e.rating,sortable:!0,cell:e=>(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)(n.gt3,{className:"text-warning me-2",style:{fontSize:"1.2rem"}}),(0,u.jsx)("span",{className:"fw-medium",children:e.rating||"No ratings yet"})]})}];(0,t.useEffect)((()=>()=>{s.current=!1}),[]);const M=async(e,a)=>{if(s.current&&p)try{k(!0),S(null);const t=await(0,d.D)(p,e,a);s.current&&t&&(v(t.content||[]),z(t.totalPages||0),D(t.totalElements||0),A(e),P(a))}catch(w){s.current&&(S("Failed to fetch labourers. Please try again."),console.error("Search error:",w))}finally{s.current&&k(!1)}},W=()=>{e("/")};return p?(0,u.jsxs)("div",{className:"labour-list-page",children:[(0,u.jsxs)(r.A,{fluid:!0,children:[(0,u.jsx)("div",{className:"labour-list-header",children:(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)(l.A,{variant:"outline-secondary",onClick:W,className:"me-3",children:(0,u.jsx)(n.QVr,{})}),(0,u.jsxs)("h3",{className:"labour-list-title mb-0",children:[p," Professionals (",L," found)"]})]})}),(0,u.jsx)("div",{className:"labour-list-content",children:y?(0,u.jsxs)("div",{className:"labour-table-container",style:{minHeight:"400px"},children:[(0,u.jsxs)("div",{className:"text-center py-5",children:[(0,u.jsx)(o.A,{animation:"border",variant:"primary"}),(0,u.jsxs)("p",{className:"mt-3",children:["Loading ",p," professionals..."]})]}),(0,u.jsxs)("div",{className:"skeleton-table",style:{opacity:.3},children:[(0,u.jsx)("div",{className:"skeleton-header",style:{height:"50px",background:"#f0f0f0",marginBottom:"10px",borderRadius:"8px"}}),(0,u.jsx)("div",{className:"skeleton-row",style:{height:"60px",background:"#f8f9fa",marginBottom:"8px",borderRadius:"6px"}}),(0,u.jsx)("div",{className:"skeleton-row",style:{height:"60px",background:"#f8f9fa",marginBottom:"8px",borderRadius:"6px"}}),(0,u.jsx)("div",{className:"skeleton-row",style:{height:"60px",background:"#f8f9fa",marginBottom:"8px",borderRadius:"6px"}}),(0,u.jsx)("div",{className:"skeleton-row",style:{height:"60px",background:"#f8f9fa",marginBottom:"8px",borderRadius:"6px"}})]})]}):w?(0,u.jsxs)("div",{className:"text-center py-5",children:[(0,u.jsx)("p",{className:"text-danger",children:w}),(0,u.jsx)(l.A,{onClick:()=>M(0,B),children:"Try Again"})]}):0===j.length?(0,u.jsxs)("div",{className:"text-center py-5",children:[(0,u.jsxs)("h4",{children:["No ",p," professionals found"]}),(0,u.jsx)("p",{className:"text-muted",children:"Try searching for a different service or check back later."}),(0,u.jsx)(l.A,{onClick:W,children:"Back to Home"})]}):(0,u.jsx)("div",{className:"labour-table-container",style:{minHeight:"400px"},children:(0,u.jsx)(c.Ay,{columns:I,data:j,pagination:!0,paginationServer:!0,paginationTotalRows:L,onChangePage:e=>{M(e-1,B)},onChangeRowsPerPage:async(e,a)=>{M(a-1,e)},progressPending:y,responsive:!0,customStyles:{headRow:{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6",fontSize:"1.1rem",fontWeight:"bold",padding:"1rem"}},headCells:{style:{paddingLeft:"1.5rem",paddingRight:"1.5rem",fontSize:"1.1rem",fontWeight:"bold",color:"#2c3e50"}},cells:{style:{paddingLeft:"1.5rem",paddingRight:"1.5rem",fontSize:"1rem",verticalAlign:"middle"}},rows:{style:{minHeight:"80px",fontSize:"1rem",backgroundColor:"white","&:nth-of-type(odd)":{backgroundColor:"#fafbfc"},"&:hover":{backgroundColor:"#e8f4ff !important",cursor:"pointer",transform:"scale(1.01)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease"}}},pagination:{style:{borderTop:"1px solid #dee2e6",padding:"1rem 0"}},table:{style:{marginBottom:"0"}},tableWrapper:{style:{overflow:"visible"}}},onRowClicked:e=>{_(e),E(!0)},noDataComponent:(0,u.jsx)("div",{className:"text-center py-4",children:(0,u.jsx)("p",{children:"No labourers found for this service."})})})})})]}),(0,u.jsx)(m.A,{show:T,onHide:()=>{E(!1),_(null)},selectedLabour:H})]}):(0,u.jsx)(r.A,{className:"mt-5",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("h3",{children:"No service specified"}),(0,u.jsx)("p",{className:"text-muted",children:"Please go back and select a service."}),(0,u.jsxs)(l.A,{onClick:W,className:"mt-3",children:[(0,u.jsx)(n.QVr,{className:"me-2"}),"Back to Home"]})]})})}},7701:(e,a,s)=>{s.d(a,{A:()=>r});var t=s(5043),l=s(3216);const r=e=>{let{show:a,onHide:s,selectedLabour:r}=e;const o=(0,l.Zp)();return(0,t.useEffect)((()=>{if(a&&r){console.log("LabourDetailsModal - selectedLabour data:",r),console.log("LabourDetailsModal - Available ID fields:",{id:r.id,labourId:r.labourId,_id:r._id}),s();const e=r.id||r.labourId||r._id||"unknown";console.log("LabourDetailsModal - Navigating to:","/labour-details/".concat(e)),o("/labour-details/".concat(e))}}),[a,r,s,o]),null}}}]);
//# sourceMappingURL=133.84473177.chunk.js.map