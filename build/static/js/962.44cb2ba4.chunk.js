"use strict";(self.webpackChunklabour_app_react=self.webpackChunklabour_app_react||[]).push([[962],{7962:(e,s,a)=>{a.r(s),a.d(s,{default:()=>I});var l=a(5043),t=a(4063),i=a(4282),r=a(7417),n=a(3519),c=a(8628),o=a(7909),d=a(5328),m=a(1072),x=a(8602),u=a(1719),h=a(5701),b=a(591),j=a(782),g=a(7877),N=a(8786),v=a(9722);const p="".concat("http://localhost:4000","/labourapp"),f={getAllLabours:async(e,s,a,l)=>{const t="".concat(p,"/admin/getAllLabours");return(await v.A.post(t,{pageNumber:e,pageSize:s,sortBy:a,sortOrder:l},{headers:{"Content-Type":"application/json"}})).data},getLabourById:async e=>{const s="".concat(p,"/labourReq/getLabourById/").concat(e);return(await v.A.get(s)).data},getAllUsers:async(e,s,a,l)=>{const t="".concat(p,"/admin/getAllUsers");return(await v.A.post(t,{pageNumber:e,pageSize:s,sortBy:a,sortOrder:l})).data},removeLabour:async e=>{const s="".concat(p,"/admin/removeLabour/").concat(e);return(await v.A.delete(s)).data},removeUser:async e=>{const s="".concat(p,"/admin/removeUser/").concat(e);return(await v.A.delete(s)).data},getAllBookings:async(e,s,a,l)=>{const t="".concat(p,"/admin/getAllBookings");return(await v.A.post(t,{pageNumber:e,pageSize:s,sortBy:a,sortOrder:l})).data},deleteBooking:async e=>{const s="".concat(p,"/admin/deleteBooking/").concat(e);return(await v.A.delete(s,{data:""})).data},getAppStats:async()=>{const e="".concat(p,"/admin/getAppStats");return(await v.A.get(e)).data},uploadLabours:async e=>{const s=new FormData;s.append("file",e);const a="".concat(p,"/admin/uploadLabours");return(await v.A.post(a,s,{headers:{"Content-Type":"multipart/form-data"}})).data}};var A=a(3204),y=a(1587),k=a(579);const S=e=>{let{isOpen:s,toggle:a,booking:l}=e;return l?(0,k.jsxs)(y.A,{show:s,onHide:a,size:"lg",centered:!0,children:[(0,k.jsx)(y.A.Header,{closeButton:!0,children:(0,k.jsxs)(y.A.Title,{children:["Booking Details (ID: ",l.bookingId,")"]})}),(0,k.jsxs)(y.A.Body,{children:[(0,k.jsxs)("div",{className:"row g-4",children:[(0,k.jsx)("div",{className:"col-md-6",children:(0,k.jsx)(c.A,{className:"shadow-sm border-0 h-100",children:(0,k.jsxs)(c.A.Body,{children:[(0,k.jsx)("h5",{className:"mb-3 text-primary",children:"User Information"}),(0,k.jsxs)("div",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"Name: "}),l.userName]}),(0,k.jsxs)("div",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"Mobile: "}),(0,k.jsx)("span",{className:"badge bg-info text-dark",children:l.userMobileNumber})]}),(0,k.jsxs)("div",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"User ID: "}),(0,k.jsx)("span",{className:"badge bg-secondary",children:l.userId})]})]})})}),(0,k.jsx)("div",{className:"col-md-6",children:(0,k.jsx)(c.A,{className:"shadow-sm border-0 h-100",children:(0,k.jsxs)(c.A.Body,{children:[(0,k.jsx)("h5",{className:"mb-3 text-primary",children:"Labour Information"}),(0,k.jsxs)("div",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"Name: "}),l.labourName]}),(0,k.jsxs)("div",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"Mobile: "}),(0,k.jsx)("span",{className:"badge bg-info text-dark",children:l.labourMobileNo})]}),(0,k.jsxs)("div",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"Labour ID: "}),(0,k.jsx)("span",{className:"badge bg-secondary",children:l.labourId})]}),(0,k.jsxs)("div",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"Service: "}),(0,k.jsx)("span",{className:"badge bg-info text-dark",children:l.labourSkill})]})]})})})]}),(0,k.jsx)("hr",{}),(0,k.jsx)(c.A,{className:"shadow-sm border-0 mt-3",children:(0,k.jsxs)(c.A.Body,{children:[(0,k.jsx)("h5",{className:"mb-3 text-primary",children:"Booking Information"}),(0,k.jsxs)("div",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"Booking Time: "}),l.bookingTime?new Date(l.bookingTime).toLocaleString():"N/A"]}),(0,k.jsxs)("div",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"Status: "}),(e=>{switch(e){case-1:return(0,k.jsxs)(t.A,{bg:"danger",className:"px-3 py-2",children:[(0,k.jsx)(A._Hm,{className:"me-1"})," Rejected"]});case 0:return(0,k.jsxs)(t.A,{bg:"secondary",className:"px-3 py-2",children:[(0,k.jsx)(A.w_X,{className:"me-1"})," Unknown"]});case 1:return(0,k.jsxs)(t.A,{bg:"warning",className:"px-3 py-2",children:[(0,k.jsx)(A.w_X,{className:"me-1"})," Pending"]});case 2:return(0,k.jsxs)(t.A,{bg:"primary",className:"px-3 py-2",children:[(0,k.jsx)(A.A7C,{className:"me-1"})," Accepted"]});case 3:return(0,k.jsxs)(t.A,{bg:"success",className:"px-3 py-2",children:[(0,k.jsx)(A.w_X,{className:"me-1"})," Completed"]});default:return(0,k.jsxs)(t.A,{bg:"secondary",className:"px-3 py-2",children:[(0,k.jsx)(A.w_X,{className:"me-1"})," Unknown"]})}})(l.bookingStatusCode)]})]})})]}),(0,k.jsx)(y.A.Footer,{children:(0,k.jsx)(i.A,{variant:"secondary",onClick:a,children:"Close"})})]}):null};var w=a(9379),C=a(7304),B=a(6058);C.t1.register(C.PP,C.kc,C.E8,C.hE,C.m_,C.s$,C.Bs,C.FN,C.No,C.dN);const R=()=>{var e,s,a,i,n,o,d,h,b;const[j,g]=(0,l.useState)(null),[N,v]=(0,l.useState)(!0),[p,y]=(0,l.useState)(null);(0,l.useEffect)((()=>{S()}),[]);const S=async()=>{try{const e=await f.getAppStats();e&&!e.hasError?g(e.returnValue):y("Failed to fetch stats")}catch(e){y("Error fetching stats"),console.error("Error fetching stats:",e)}finally{v(!1)}};if(N)return(0,k.jsx)("div",{className:"stats-loading",children:(0,k.jsxs)("div",{className:"text-center py-5",children:[(0,k.jsx)(r.A,{animation:"border",role:"status",variant:"primary",children:(0,k.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,k.jsx)("p",{className:"mt-3 text-muted",children:"Loading analytics..."})]})});if(p)return(0,k.jsxs)(u.A,{variant:"danger",className:"stats-error",children:[(0,k.jsx)(A._Hm,{className:"me-2"}),p]});if(!j)return(0,k.jsxs)(u.A,{variant:"warning",className:"stats-error",children:[(0,k.jsx)(A.w_X,{className:"me-2"}),"No statistics available"]});const C=j.totalUsers||0,R=j.totalLabours||0,I=j.totalBookings||0,E=j.totalRevenue||0,L={labels:["Completed","Pending","Accepted","Rejected"],datasets:[{data:[(null===(e=j.bookingStatusStats)||void 0===e?void 0:e.completed)||0,(null===(s=j.bookingStatusStats)||void 0===s?void 0:s.pending)||0,(null===(a=j.bookingStatusStats)||void 0===a?void 0:a.accepted)||0,(null===(i=j.bookingStatusStats)||void 0===i?void 0:i.rejected)||0],backgroundColor:["#10b981","#f59e0b","#3b82f6","#ef4444"],borderWidth:2,borderColor:"#ffffff",hoverBorderWidth:3}]},z={labels:["5 Stars","4 Stars","3 Stars","2 Stars","1 Star"],datasets:[{data:[(null===(n=j.labourRatingStats)||void 0===n?void 0:n.rating_5)||0,(null===(o=j.labourRatingStats)||void 0===o?void 0:o.rating_4)||0,(null===(d=j.labourRatingStats)||void 0===d?void 0:d.rating_3)||0,(null===(h=j.labourRatingStats)||void 0===h?void 0:h.rating_2)||0,(null===(b=j.labourRatingStats)||void 0===b?void 0:b.rating_1)||0],backgroundColor:["#10b981","#3b82f6","#f59e0b","#f97316","#ef4444"],borderWidth:2,borderColor:"#ffffff"}]},F={labels:Object.keys(j.availableSkillStats||{}),datasets:[{label:"Available Labourers",data:Object.values(j.availableSkillStats||{}),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"#3b82f6",borderWidth:2,borderRadius:8,borderSkipped:!1}]},P={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#3b82f6",borderWidth:1,cornerRadius:8,displayColors:!0}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1,color:"#64748b"},grid:{color:"#e2e8f0"}},x:{ticks:{color:"#64748b"},grid:{color:"#e2e8f0"}}}},T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#3b82f6",borderWidth:1,cornerRadius:8}}};return(0,k.jsxs)("div",{className:"admin-stats",children:[(0,k.jsxs)(m.A,{className:"g-4 mb-4",children:[(0,k.jsx)(x.A,{lg:3,md:6,children:(0,k.jsx)(c.A,{className:"metric-card",children:(0,k.jsx)(c.A.Body,{children:(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h6",{className:"metric-label",children:"Total Users"}),(0,k.jsx)("h3",{className:"metric-value",children:C.toLocaleString()}),(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(A.uCC,{className:"text-success me-1"}),(0,k.jsxs)("small",{className:"text-success",children:["+",12.5,"%"]})]})]}),(0,k.jsx)("div",{className:"metric-icon users-icon",children:(0,k.jsx)(A.YXz,{})})]})})})}),(0,k.jsx)(x.A,{lg:3,md:6,children:(0,k.jsx)(c.A,{className:"metric-card",children:(0,k.jsx)(c.A.Body,{children:(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h6",{className:"metric-label",children:"Total Labourers"}),(0,k.jsx)("h3",{className:"metric-value",children:R.toLocaleString()}),(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(A.uCC,{className:"text-success me-1"}),(0,k.jsxs)("small",{className:"text-success",children:["+",8.3,"%"]})]})]}),(0,k.jsx)("div",{className:"metric-icon labourers-icon",children:(0,k.jsx)(A.p7b,{})})]})})})}),(0,k.jsx)(x.A,{lg:3,md:6,children:(0,k.jsx)(c.A,{className:"metric-card",children:(0,k.jsx)(c.A.Body,{children:(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h6",{className:"metric-label",children:"Total Bookings"}),(0,k.jsx)("h3",{className:"metric-value",children:I.toLocaleString()}),(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(A.uCC,{className:"text-success me-1"}),(0,k.jsxs)("small",{className:"text-success",children:["+",15.7,"%"]})]})]}),(0,k.jsx)("div",{className:"metric-icon bookings-icon",children:(0,k.jsx)(A.kkc,{})})]})})})}),(0,k.jsx)(x.A,{lg:3,md:6,children:(0,k.jsx)(c.A,{className:"metric-card",children:(0,k.jsx)(c.A.Body,{children:(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h6",{className:"metric-label",children:"Total Revenue"}),(0,k.jsxs)("h3",{className:"metric-value",children:["\u20b9",E.toLocaleString()]}),(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(A.uCC,{className:"text-success me-1"}),(0,k.jsxs)("small",{className:"text-success",children:["+",22.1,"%"]})]})]}),(0,k.jsx)("div",{className:"metric-icon revenue-icon",children:(0,k.jsx)(A.YYR,{})})]})})})})]}),(0,k.jsxs)(m.A,{className:"g-4",children:[(0,k.jsx)(x.A,{lg:6,md:12,children:(0,k.jsx)(c.A,{className:"chart-card",children:(0,k.jsxs)(c.A.Body,{children:[(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,k.jsxs)("h5",{className:"chart-title",children:[(0,k.jsx)(A.kkc,{className:"me-2"}),"Booking Status Distribution"]}),(0,k.jsxs)(t.A,{bg:"info",className:"chart-badge",children:[Object.values(j.bookingStatusStats||{}).reduce(((e,s)=>e+s),0)," Total"]})]}),(0,k.jsx)("div",{className:"chart-container",children:(0,k.jsx)(B.nu,{data:L,options:T})})]})})}),(0,k.jsx)(x.A,{lg:6,md:12,children:(0,k.jsx)(c.A,{className:"chart-card",children:(0,k.jsxs)(c.A.Body,{children:[(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,k.jsxs)("h5",{className:"chart-title",children:[(0,k.jsx)(A.gt3,{className:"me-2"}),"Rating Distribution"]}),(0,k.jsxs)(t.A,{bg:"warning",className:"chart-badge",children:[Object.values(j.labourRatingStats||{}).reduce(((e,s)=>e+s),0)," Ratings"]})]}),(0,k.jsx)("div",{className:"chart-container",children:(0,k.jsx)(B.nu,{data:z,options:T})})]})})}),(0,k.jsx)(x.A,{lg:8,md:12,children:(0,k.jsx)(c.A,{className:"chart-card",children:(0,k.jsxs)(c.A.Body,{children:[(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,k.jsxs)("h5",{className:"chart-title",children:[(0,k.jsx)(A.p7b,{className:"me-2"}),"Available Labourers by Skill"]}),(0,k.jsxs)(t.A,{bg:"primary",className:"chart-badge",children:[Object.values(j.availableSkillStats||{}).reduce(((e,s)=>e+s),0)," Available"]})]}),(0,k.jsx)("div",{className:"chart-container",children:(0,k.jsx)(B.yP,{data:F,options:(0,w.A)((0,w.A)({},P),{},{indexAxis:"y",plugins:(0,w.A)((0,w.A)({},P.plugins),{},{legend:{display:!1}}),scales:{x:{beginAtZero:!0,ticks:{stepSize:1,color:"#64748b"},grid:{color:"#e2e8f0"}},y:{ticks:{color:"#64748b"},grid:{color:"#e2e8f0"}}}})})})]})})}),(0,k.jsx)(x.A,{lg:4,md:12,children:(0,k.jsx)(c.A,{className:"chart-card",children:(0,k.jsxs)(c.A.Body,{children:[(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,k.jsxs)("h5",{className:"chart-title",children:[(0,k.jsx)(A.YYR,{className:"me-2"}),"Revenue Trend"]}),(0,k.jsxs)(t.A,{bg:"success",className:"chart-badge",children:["+",22.1,"%"]})]}),(0,k.jsx)("div",{className:"chart-container",children:(0,k.jsx)(B.N1,{data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Revenue",data:[12e3,15e3,18e3,22e3,25e3,28e3],borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:3,fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#10b981",borderWidth:1,cornerRadius:8}},scales:{y:{beginAtZero:!0,ticks:{color:"#64748b",callback:function(e){return"\u20b9"+e.toLocaleString()}},grid:{color:"#e2e8f0"}},x:{ticks:{color:"#64748b"},grid:{color:"#e2e8f0"}}}}})})]})})})]})]})};const I=function(){const[e,s]=(0,l.useState)([]),[a,v]=(0,l.useState)([]),[p,y]=(0,l.useState)([]),[w,C]=(0,l.useState)(!0),[B,I]=(0,l.useState)(!0),[E,L]=(0,l.useState)(!0),[z,F]=(0,l.useState)(null),[P,T]=(0,l.useState)(null),[O,D]=(0,l.useState)(null),[M,U]=(0,l.useState)(null),[_,H]=(0,l.useState)(!1),[W,Y]=(0,l.useState)(!1),[K,X]=(0,l.useState)(!1),[$,Z]=(0,l.useState)(!1),[q,V]=(0,l.useState)(!1),[J,G]=(0,l.useState)(null),[Q,ee]=(0,l.useState)(!1),[se,ae]=(0,l.useState)("overview"),[le,te]=(0,l.useState)(""),[ie,re]=(0,l.useState)("all"),ne=(0,l.useRef)(null),[ce,oe]=(0,l.useState)(0),[de,me]=(0,l.useState)(10),[xe,ue]=(0,l.useState)("rating"),[he,be]=(0,l.useState)("asc"),[je,ge]=(0,l.useState)(0),[Ne,ve]=(0,l.useState)(0),[pe,fe]=(0,l.useState)(0),[Ae,ye]=(0,l.useState)(5),[ke,Se]=(0,l.useState)("fullName"),[we,Ce]=(0,l.useState)("asc"),[Be,Re]=(0,l.useState)(0),[Ie,Ee]=(0,l.useState)(0),[Le,ze]=(0,l.useState)(0),[Fe,Pe]=(0,l.useState)(20),[Te,Oe]=(0,l.useState)("bookingTime"),[De,Me]=(0,l.useState)("asc"),[Ue,_e]=(0,l.useState)(0),[He,We]=(0,l.useState)(0),Ye={table:{style:{backgroundColor:"transparent"}},headRow:{style:{backgroundColor:"#f8fafc",borderBottom:"2px solid #e2e8f0",borderRadius:"12px 12px 0 0",minHeight:"60px"}},headCells:{style:{paddingLeft:"24px",paddingRight:"24px",paddingTop:"16px",paddingBottom:"16px",fontSize:"0.875rem",fontWeight:"700",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em"}},rows:{style:{minHeight:"72px",fontSize:"0.875rem",backgroundColor:"white",borderBottom:"1px solid #f3f4f6","&:hover":{backgroundColor:"#f9fafb",transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease"}}},cells:{style:{paddingLeft:"24px",paddingRight:"24px",paddingTop:"16px",paddingBottom:"16px",color:"#374151",fontWeight:"500"}},pagination:{style:{backgroundColor:"#f8fafc",borderTop:"1px solid #e2e8f0",borderRadius:"0 0 12px 12px",padding:"16px 24px"}}},[Ke,Xe]=(0,l.useState)(null),[$e,Ze]=(0,l.useState)(null),[qe,Ve]=(0,l.useState)(null),[Je,Ge]=(0,l.useState)(null),[Qe,es]=(0,l.useState)(null),[ss,as]=(0,l.useState)(null),ls=e=>{switch(e){case-1:return(0,k.jsxs)(t.A,{bg:"danger",className:"status-badge",children:[(0,k.jsx)(A._Hm,{className:"me-1"})," Rejected"]});case 1:return(0,k.jsxs)(t.A,{bg:"warning",className:"status-badge",children:[(0,k.jsx)(A.w_X,{className:"me-1"})," Pending"]});case 2:return(0,k.jsxs)(t.A,{bg:"primary",className:"status-badge",children:[(0,k.jsx)(A.A7C,{className:"me-1"})," Accepted"]});case 3:return(0,k.jsxs)(t.A,{bg:"success",className:"status-badge",children:[(0,k.jsx)(A.CMH,{className:"me-1"})," Completed"]});default:return(0,k.jsxs)(t.A,{bg:"secondary",className:"status-badge",children:[(0,k.jsx)(A.BS8,{className:"me-1"})," Unknown"]})}},ts=[{name:"Labour",selector:e=>e.labourName,sortable:!0,sortField:"labourName",cell:e=>(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)("div",{className:"labour-avatar me-3",children:(0,k.jsx)(A.x$1,{className:"text-white",size:16})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"fw-bold text-primary",children:e.labourName}),(0,k.jsx)("small",{className:"text-muted",children:e.labourMobileNo})]})]}),width:"200px"},{name:"Skill",selector:e=>e.labourSkill,sortable:!0,sortField:"labourSkill",cell:e=>(0,k.jsxs)(t.A,{bg:"info",className:"skill-badge",children:[(0,k.jsx)(A.xdT,{className:"me-1"}),e.labourSkill]}),width:"150px"},{name:"Rating",selector:e=>parseFloat(e.rating),sortable:!0,sortField:"rating",cell:e=>(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(A.gt3,{className:"text-warning me-1"}),(0,k.jsx)("span",{className:"fw-bold",children:e.rating||"0"}),(0,k.jsxs)("small",{className:"text-muted ms-1",children:["(",e.ratingCount||0,")"]})]}),width:"120px"},{name:"Status",selector:e=>e.status,sortable:!0,sortField:"status",cell:e=>(0,k.jsx)(t.A,{bg:"active"===e.status?"success":"secondary",className:"status-badge",children:"active"===e.status?"Active":"Inactive"}),width:"100px"},{name:"Actions",cell:e=>(0,k.jsxs)("div",{className:"d-flex gap-2",children:[(0,k.jsx)(i.A,{variant:"outline-info",size:"sm",onClick:()=>xs(e.labourId),disabled:qe===e.labourId,className:"action-btn",children:qe===e.labourId?(0,k.jsx)(r.A,{as:"span",animation:"border",size:"sm"}):(0,k.jsx)(A.Ny1,{})}),(0,k.jsx)(i.A,{variant:"outline-danger",size:"sm",onClick:()=>ds(e.labourId),disabled:Ke===e.labourId,className:"action-btn",children:Ke===e.labourId?(0,k.jsx)(r.A,{as:"span",animation:"border",size:"sm"}):(0,k.jsx)(A.qbC,{})})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0,width:"120px"}],is=[{name:"User",selector:e=>e.fullName,sortable:!0,sortField:"fullName",cell:e=>(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)("div",{className:"user-avatar me-3",children:(0,k.jsx)(A.x$1,{className:"text-white",size:16})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"fw-bold text-primary",children:e.fullName}),(0,k.jsx)("small",{className:"text-muted",children:e.email})]})]}),width:"200px"},{name:"Contact",selector:e=>e.mobileNumber,sortable:!0,sortField:"mobileNo",cell:e=>(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(A.Cab,{className:"text-muted me-2"}),(0,k.jsx)("span",{children:e.mobileNumber})]}),width:"150px"},{name:"Status",selector:e=>e.status,sortable:!0,sortField:"status",cell:e=>(0,k.jsx)(t.A,{bg:"active"===e.status?"success":"secondary",className:"status-badge",children:"active"===e.status?"Active":"Inactive"}),width:"100px"},{name:"Actions",cell:e=>(0,k.jsxs)("div",{className:"d-flex gap-2",children:[(0,k.jsx)(i.A,{variant:"outline-info",size:"sm",onClick:()=>us(e.userId,e.mobileNumber),disabled:Je===e.userId,className:"action-btn",children:Je===e.userId?(0,k.jsx)(r.A,{as:"span",animation:"border",size:"sm"}):(0,k.jsx)(A.Ny1,{})}),(0,k.jsx)(i.A,{variant:"outline-danger",size:"sm",onClick:()=>ms(e.userId),disabled:$e===e.userId,className:"action-btn",children:$e===e.userId?(0,k.jsx)(r.A,{as:"span",animation:"border",size:"sm"}):(0,k.jsx)(A.qbC,{})})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0,width:"120px"}],rs=[{name:"Booking ID",selector:e=>e.bookingId,sortable:!0,sortField:"bookingId",cell:e=>(0,k.jsxs)("div",{className:"fw-bold text-primary",children:["#",e.bookingId]}),width:"120px"},{name:"Customer",selector:e=>e.userName,sortable:!0,sortField:"userName",cell:e=>(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)("div",{className:"user-avatar me-2",children:(0,k.jsx)(A.x$1,{className:"text-white",size:12})}),(0,k.jsx)("span",{className:"fw-medium",children:e.userName})]}),width:"150px"},{name:"Labour",selector:e=>e.labourName,sortable:!0,sortField:"labourName",cell:e=>(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)("div",{className:"labour-avatar me-2",children:(0,k.jsx)(A.p7b,{className:"text-white",size:12})}),(0,k.jsx)("span",{className:"fw-medium",children:e.labourName})]}),width:"150px"},{name:"Service",selector:e=>e.serviceName,sortable:!0,sortField:"serviceName",cell:e=>(0,k.jsxs)(t.A,{bg:"info",className:"service-badge",children:[(0,k.jsx)(A.xdT,{className:"me-1"}),e.serviceName]}),width:"120px"},{name:"Status",selector:e=>e.bookingStatusCode,sortable:!0,sortField:"bookingStatusCode",cell:e=>ls(e.bookingStatusCode),width:"120px"},{name:"Date",selector:e=>e.bookingTime,sortable:!0,sortField:"bookingTime",cell:e=>(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(A.bfZ,{className:"text-muted me-2"}),(0,k.jsx)("small",{children:new Date(e.bookingTime).toLocaleDateString()})]}),width:"120px"},{name:"Actions",cell:e=>(0,k.jsxs)("div",{className:"d-flex gap-2",children:[(0,k.jsx)(i.A,{variant:"outline-info",size:"sm",onClick:()=>hs(e),disabled:ss===e.bookingId,className:"action-btn",children:ss===e.bookingId?(0,k.jsx)(r.A,{as:"span",animation:"border",size:"sm"}):(0,k.jsx)(A.Ny1,{})}),(0,k.jsx)(i.A,{variant:"outline-danger",size:"sm",onClick:()=>bs(e.bookingId),disabled:Qe===e.bookingId,className:"action-btn",children:Qe===e.bookingId?(0,k.jsx)(r.A,{as:"span",animation:"border",size:"sm"}):(0,k.jsx)(A.qbC,{})})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0,width:"120px"}],ns=async()=>{try{C(!0);const e=await f.getAllLabours(ce,de,xe,he);e&&!e.hasError?(s(e.content||[]),ge(e.totalElements||0),ve(e.totalPages||0)):F("Failed to fetch labours")}catch(e){F("Error fetching labours"),console.error("Error fetching labours:",e)}finally{C(!1)}},cs=async()=>{try{I(!0);const e=await f.getAllUsers(pe,Ae,ke,we);e&&!e.hasError?(v(e.content||[]),Re(e.totalElements||0),Ee(e.totalPages||0)):F("Failed to fetch users")}catch(e){F("Error fetching users"),console.error("Error fetching users:",e)}finally{I(!1)}},os=async()=>{try{L(!0);const e=await f.getAllBookings(Le,Fe,Te,De);e&&!e.hasError?(y(e.content||[]),_e(e.totalElements||0),We(e.totalPages||0)):F("Failed to fetch bookings")}catch(e){F("Error fetching bookings"),console.error("Error fetching bookings:",e)}finally{L(!1)}},ds=async e=>{if(window.confirm("Are you sure you want to remove this labour?"))try{Xe(e);const s=await f.removeLabour(e);s&&!s.hasError?ns():F("Failed to remove labour")}catch(s){F("Error removing labour"),console.error("Error removing labour:",s)}finally{Xe(null)}},ms=async e=>{if(window.confirm("Are you sure you want to remove this user?"))try{Ze(e);const s=await f.removeUser(e);s&&!s.hasError?cs():F("Failed to remove user")}catch(s){F("Error removing user"),console.error("Error removing user:",s)}finally{Ze(null)}},xs=async e=>{try{Ve(e);const s=await f.getLabourById(e);s&&!s.hasError?(T(s.returnValue),H(!0)):F("Failed to fetch labour details")}catch(s){F("Error fetching labour details"),console.error("Error fetching labour details:",s)}finally{Ve(null)}},us=(e,s)=>{D({userId:e,mobileNumber:s}),Y(!0)},hs=e=>{U(e),X(!0)},bs=async e=>{if(window.confirm("Are you sure you want to delete this booking?"))try{es(e);const s=await f.removeBooking(e);s&&!s.hasError?os():F("Failed to delete booking")}catch(s){F("Error deleting booking"),console.error("Error deleting booking:",s)}finally{es(null)}},js=()=>{H(!_),_||T(null)},gs=()=>{Y(!W),W||D(null)};return(0,l.useEffect)((()=>{if(Q){const e=setTimeout((()=>ee(!1)),3e3);return()=>clearTimeout(e)}}),[Q]),(0,l.useEffect)((()=>{if(J){const e=setTimeout((()=>G(null)),5e3);return()=>clearTimeout(e)}}),[J]),(0,l.useEffect)((()=>{ns()}),[ce,de,xe,he]),(0,l.useEffect)((()=>{cs()}),[pe,Ae,ke,we]),(0,l.useEffect)((()=>{os()}),[Le,Fe,Te,De]),(0,k.jsxs)(n.A,{fluid:!0,className:"admin-dashboard",children:[(0,k.jsx)("div",{className:"admin-header mb-4",children:(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h1",{className:"admin-title mb-2",children:[(0,k.jsx)(A.SMR,{className:"me-3 text-primary"}),"Admin Dashboard"]}),(0,k.jsx)("p",{className:"text-muted mb-0",children:"Manage your labour services platform"})]}),(0,k.jsxs)("div",{className:"admin-actions",children:[(0,k.jsxs)(i.A,{variant:"outline-primary",className:"me-2",children:[(0,k.jsx)(A.WCW,{className:"me-2"}),"Export Data"]}),(0,k.jsxs)(i.A,{variant:"primary",children:[(0,k.jsx)(A.OiG,{className:"me-2"}),"Add New"]})]})]})}),(0,k.jsx)(R,{}),(0,k.jsxs)(c.A,{className:"admin-content-card",children:[(0,k.jsx)(c.A.Header,{className:"admin-card-header",children:(0,k.jsxs)(o.A,{variant:"tabs",activeKey:se,onSelect:e=>ae(e),children:[(0,k.jsx)(o.A.Item,{children:(0,k.jsxs)(o.A.Link,{eventKey:"overview",className:"admin-tab",children:[(0,k.jsx)(A.YYR,{className:"me-2"}),"Overview"]})}),(0,k.jsx)(o.A.Item,{children:(0,k.jsxs)(o.A.Link,{eventKey:"labours",className:"admin-tab",children:[(0,k.jsx)(A.p7b,{className:"me-2"}),"Labour Management"]})}),(0,k.jsx)(o.A.Item,{children:(0,k.jsxs)(o.A.Link,{eventKey:"users",className:"admin-tab",children:[(0,k.jsx)(A.YXz,{className:"me-2"}),"User Management"]})}),(0,k.jsx)(o.A.Item,{children:(0,k.jsxs)(o.A.Link,{eventKey:"bookings",className:"admin-tab",children:[(0,k.jsx)(A.kkc,{className:"me-2"}),"Booking Management"]})})]})}),(0,k.jsx)(c.A.Body,{className:"admin-card-body",children:(0,k.jsxs)(d.A.Content,{children:[(0,k.jsx)(d.A.Pane,{eventKey:"overview",active:"overview"===se,children:(0,k.jsx)("div",{className:"overview-section",children:(0,k.jsxs)(m.A,{className:"g-4",children:[(0,k.jsx)(x.A,{md:6,children:(0,k.jsx)(c.A,{className:"h-100 overview-card",children:(0,k.jsxs)(c.A.Body,{children:[(0,k.jsxs)("h5",{className:"card-title",children:[(0,k.jsx)(A.p7b,{className:"me-2 text-primary"}),"Recent Labours"]}),(0,k.jsx)("div",{className:"recent-list",children:e.slice(0,5).map(((e,s)=>(0,k.jsx)("div",{className:"recent-item",children:(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)("div",{className:"labour-avatar me-3",children:(0,k.jsx)(A.x$1,{className:"text-white",size:14})}),(0,k.jsxs)("div",{className:"flex-grow-1",children:[(0,k.jsx)("div",{className:"fw-bold",children:e.labourName}),(0,k.jsx)("small",{className:"text-muted",children:e.labourSkill})]}),(0,k.jsx)(t.A,{bg:"success",className:"status-badge",children:"Active"})]})},e.labourId)))})]})})}),(0,k.jsx)(x.A,{md:6,children:(0,k.jsx)(c.A,{className:"h-100 overview-card",children:(0,k.jsxs)(c.A.Body,{children:[(0,k.jsxs)("h5",{className:"card-title",children:[(0,k.jsx)(A.kkc,{className:"me-2 text-primary"}),"Recent Bookings"]}),(0,k.jsx)("div",{className:"recent-list",children:p.slice(0,5).map(((e,s)=>(0,k.jsx)("div",{className:"recent-item",children:(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)("div",{className:"booking-avatar me-3",children:(0,k.jsx)(A.bfZ,{className:"text-white",size:14})}),(0,k.jsxs)("div",{className:"flex-grow-1",children:[(0,k.jsxs)("div",{className:"fw-bold",children:["#",e.bookingId]}),(0,k.jsx)("small",{className:"text-muted",children:e.userName})]}),ls(e.bookingStatusCode)]})},e.bookingId)))})]})})})]})})}),(0,k.jsx)(d.A.Pane,{eventKey:"labours",active:"labours"===se,children:(0,k.jsxs)("div",{className:"labour-management-section",children:[(0,k.jsx)("div",{className:"section-header mb-4",children:(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h4",{className:"section-title",children:[(0,k.jsx)(A.p7b,{className:"me-2"}),"Labour Management"]}),(0,k.jsx)("p",{className:"text-muted mb-0",children:"Manage service providers and their details"})]}),(0,k.jsxs)("div",{className:"d-flex gap-2",children:[(0,k.jsx)("input",{type:"file",ref:ne,onChange:async e=>{const a=e.target.files[0];if(a)if(a.name.match(/\.(xlsx|xls)$/))try{V(!0),G(null),ee(!1);const e=await f.uploadLabours(a);if(e&&!e.hasError){ee(!0);const e=await f.getAllLabours(ce,de,xe,he);e&&(s(e.content||[]),ge(e.totalElements||0),ve(e.totalPages||0))}else G((null===e||void 0===e?void 0:e.message)||"Failed to upload labours")}catch(z){var l,t;G((null===(l=z.response)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message)||"Error uploading file")}finally{V(!1),ne.current&&(ne.current.value="")}else G("Please upload an Excel file (.xlsx or .xls)")},accept:".xlsx,.xls",style:{display:"none"}}),(0,k.jsx)(i.A,{variant:"success",onClick:()=>{var e;return null===(e=ne.current)||void 0===e?void 0:e.click()},disabled:q,className:"upload-btn",children:q?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(r.A,{as:"span",animation:"border",size:"sm",className:"me-2"}),"Uploading..."]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(A.HVe,{className:"me-2"}),"Bulk Upload"]})})]})]})}),J&&(0,k.jsxs)(u.A,{variant:"danger",onClose:()=>G(null),dismissible:!0,className:"mb-3",children:[(0,k.jsx)(A.BS8,{className:"me-2"}),J]}),Q&&(0,k.jsxs)(u.A,{variant:"success",onClose:()=>ee(!1),dismissible:!0,className:"mb-3",children:[(0,k.jsx)(A.CMH,{className:"me-2"}),"Labours uploaded successfully!"]}),(0,k.jsx)("div",{className:"data-table-container",children:(0,k.jsx)(N.Ay,{columns:ts,data:Array.isArray(e)?e:[],pagination:!0,paginationServer:!0,paginationTotalRows:je,paginationDefaultPage:ce+1,onChangePage:e=>oe(e-1),onChangeRowsPerPage:(e,s)=>{me(e),oe(s-1)},sortServer:!0,onSort:(e,s)=>{ue(e.sortField||"rating"),be(s||"asc")},progressPending:w,noDataComponent:(0,k.jsxs)("div",{className:"text-center py-4",children:[(0,k.jsx)(A.p7b,{className:"text-muted mb-3",size:48}),(0,k.jsx)("p",{className:"text-muted mb-0",children:"No labours found"})]}),customStyles:Ye,responsive:!0,highlightOnHover:!0,pointerOnHover:!0})})]})}),(0,k.jsx)(d.A.Pane,{eventKey:"users",active:"users"===se,children:(0,k.jsxs)("div",{className:"user-management-section",children:[(0,k.jsx)("div",{className:"section-header mb-4",children:(0,k.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,k.jsxs)("div",{children:[(0,k.jsxs)("h4",{className:"section-title",children:[(0,k.jsx)(A.YXz,{className:"me-2"}),"User Management"]}),(0,k.jsx)("p",{className:"text-muted mb-0",children:"Manage customer accounts and information"})]})})}),(0,k.jsx)("div",{className:"data-table-container",children:(0,k.jsx)(N.Ay,{columns:is,data:Array.isArray(a)?a:[],pagination:!0,paginationServer:!0,paginationTotalRows:Be,paginationDefaultPage:pe+1,onChangePage:e=>fe(e-1),onChangeRowsPerPage:(e,s)=>{ye(e),fe(s-1)},sortServer:!0,onSort:(e,s)=>{Se(e.sortField||"fullName"),Ce(s||"asc")},progressPending:B,noDataComponent:(0,k.jsxs)("div",{className:"text-center py-4",children:[(0,k.jsx)(A.YXz,{className:"text-muted mb-3",size:48}),(0,k.jsx)("p",{className:"text-muted mb-0",children:"No users found"})]}),customStyles:Ye,responsive:!0,highlightOnHover:!0,pointerOnHover:!0})})]})}),(0,k.jsx)(d.A.Pane,{eventKey:"bookings",active:"bookings"===se,children:(0,k.jsxs)("div",{className:"booking-management-section",children:[(0,k.jsx)("div",{className:"section-header mb-4",children:(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h4",{className:"section-title",children:[(0,k.jsx)(A.kkc,{className:"me-2"}),"Booking Management"]}),(0,k.jsx)("p",{className:"text-muted mb-0",children:"Monitor and manage service bookings"})]}),(0,k.jsxs)("div",{className:"d-flex gap-2",children:[(0,k.jsxs)("div",{className:"search-box",children:[(0,k.jsx)(A.KSO,{className:"search-icon"}),(0,k.jsx)("input",{type:"text",placeholder:"Search bookings...",className:"search-input",value:le,onChange:e=>te(e.target.value)})]}),(0,k.jsxs)("select",{className:"form-select filter-select",value:ie,onChange:e=>re(e.target.value),children:[(0,k.jsx)("option",{value:"all",children:"All Status"}),(0,k.jsx)("option",{value:"pending",children:"Pending"}),(0,k.jsx)("option",{value:"accepted",children:"Accepted"}),(0,k.jsx)("option",{value:"completed",children:"Completed"}),(0,k.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]})}),(0,k.jsx)("div",{className:"data-table-container",children:(0,k.jsx)(N.Ay,{columns:rs,data:Array.isArray(p)?p:[],pagination:!0,paginationServer:!0,paginationTotalRows:Ue,paginationDefaultPage:Le+1,onChangePage:e=>ze(e-1),onChangeRowsPerPage:(e,s)=>{Pe(e),ze(s-1)},sortServer:!0,onSort:(e,s)=>{Oe(e.sortField||"bookingTime"),Me(s||"asc")},progressPending:E,noDataComponent:(0,k.jsxs)("div",{className:"text-center py-4",children:[(0,k.jsx)(A.kkc,{className:"text-muted mb-3",size:48}),(0,k.jsx)("p",{className:"text-muted mb-0",children:"No bookings found"})]}),customStyles:Ye,responsive:!0,highlightOnHover:!0,pointerOnHover:!0})})]})})]})})]}),(0,k.jsxs)(h.A,{isOpen:_,toggle:js,size:"lg",className:"admin-modal",children:[(0,k.jsx)(b.A,{toggle:js,className:"admin-modal-header",children:(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(A.p7b,{className:"me-2 text-primary"}),"Labour Details"]})}),(0,k.jsx)(j.A,{className:"admin-modal-body",children:P&&(0,k.jsxs)("div",{className:"labour-details",children:[(0,k.jsx)("div",{className:"detail-header mb-4",children:(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)("div",{className:"labour-avatar-large me-3",children:(0,k.jsx)(A.x$1,{className:"text-white",size:24})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"mb-1",children:P.labourName}),(0,k.jsxs)(t.A,{bg:"info",className:"skill-badge-large",children:[(0,k.jsx)(A.xdT,{className:"me-1"}),P.labourSkill]})]})]})}),(0,k.jsxs)(m.A,{className:"g-3",children:[(0,k.jsx)(x.A,{md:6,children:(0,k.jsxs)("div",{className:"detail-item",children:[(0,k.jsxs)("label",{className:"detail-label",children:[(0,k.jsx)(A.Cab,{className:"me-2"}),"Mobile Number"]}),(0,k.jsx)("div",{className:"detail-value",children:P.labourMobileNo})]})}),(0,k.jsx)(x.A,{md:6,children:(0,k.jsxs)("div",{className:"detail-item",children:[(0,k.jsxs)("label",{className:"detail-label",children:[(0,k.jsx)(A.gt3,{className:"me-2"}),"Rating"]}),(0,k.jsx)("div",{className:"detail-value",children:P.rating&&Number(P.rating)>0?"".concat(P.rating," (").concat(P.ratingCount||0," reviews)"):"No ratings yet"})]})}),Array.isArray(null===P||void 0===P?void 0:P.labourSubSkills)&&P.labourSubSkills.length>0&&(0,k.jsx)(x.A,{md:12,children:(0,k.jsxs)("div",{className:"detail-item",children:[(0,k.jsxs)("label",{className:"detail-label",children:[(0,k.jsx)(A.xdT,{className:"me-2"}),"Sub Skills"]}),(0,k.jsx)("div",{className:"detail-value",children:(0,k.jsx)("div",{className:"d-flex flex-wrap gap-2",children:P.labourSubSkills.map(((e,s)=>(0,k.jsx)(t.A,{bg:"secondary",className:"sub-skill-badge",children:e.subSkillName},e.subSkillId||s)))})})]})})]})]})}),(0,k.jsx)(g.A,{className:"admin-modal-footer",children:(0,k.jsx)(i.A,{color:"secondary",onClick:js,children:"Close"})})]}),(0,k.jsxs)(h.A,{isOpen:W,toggle:gs,size:"lg",className:"admin-modal",children:[(0,k.jsx)(b.A,{toggle:gs,className:"admin-modal-header",children:(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)(A.x$1,{className:"me-2 text-primary"}),"User Details"]})}),(0,k.jsx)(j.A,{className:"admin-modal-body",children:O&&(0,k.jsxs)("div",{className:"user-details",children:[(0,k.jsx)("div",{className:"detail-header mb-4",children:(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)("div",{className:"user-avatar-large me-3",children:(0,k.jsx)(A.x$1,{className:"text-white",size:24})}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("h4",{className:"mb-1",children:["User #",O.userId]}),(0,k.jsx)(t.A,{bg:"success",className:"status-badge-large",children:"Active"})]})]})}),(0,k.jsxs)(m.A,{className:"g-3",children:[(0,k.jsx)(x.A,{md:6,children:(0,k.jsxs)("div",{className:"detail-item",children:[(0,k.jsxs)("label",{className:"detail-label",children:[(0,k.jsx)(A.Cab,{className:"me-2"}),"Mobile Number"]}),(0,k.jsx)("div",{className:"detail-value",children:O.mobileNumber})]})}),(0,k.jsx)(x.A,{md:6,children:(0,k.jsxs)("div",{className:"detail-item",children:[(0,k.jsxs)("label",{className:"detail-label",children:[(0,k.jsx)(A.maD,{className:"me-2"}),"Email"]}),(0,k.jsx)("div",{className:"detail-value",children:O.email||"Not provided"})]})})]})]})}),(0,k.jsx)(g.A,{className:"admin-modal-footer",children:(0,k.jsx)(i.A,{color:"secondary",onClick:gs,children:"Close"})})]}),(0,k.jsx)(S,{isOpen:K,toggle:()=>{X(!K),K||U(null)},booking:M})]})}}}]);
//# sourceMappingURL=962.44cb2ba4.chunk.js.map